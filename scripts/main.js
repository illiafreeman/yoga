!function(h,t){"use strict";var n="account-plan-management",m="d-none",i="active",o="invisible",s={},l="click."+n,d={},u=null,p=!1,r=!1,f=null,v=null,c=!1,g=null,b=!1,y="",C=0,w="";function $(e,t){this.element=h(e),this.options=h.extend({},h.fn[n].defaults,this.element.data(),t),this.init()}$.prototype={init:function(){this.$form=this.element.find("[data-form-validate]"),this.$loading=this.element.find(".img-loading"),this.$formErrorMsg=this.element.find(".form-error-msg"),this.$headerPlan=this.element.find("[data-header-plan]"),this.$accountSubscriptionList=this.element.find("[data-account-plan-new]"),this.$deactivateSubscription=this.element.find("[data-item-deactivate-only]"),this.$cardWrapper=this.element.find(".account-plan-card-wrapper"),this.$planListItem=this.element.find("[data-plan-list-item]"),this.$promoGroup=this.element.find("[data-promo-group]"),this.$btnNext=this.element.find("[data-btn-next]"),this.$btnBack=this.element.find("[data-btn-back]"),this.$btnDeactivate=this.element.find("[data-btn-deactivate]"),this.$stepErrorMsg=this.element.find(".step-error-msg"),this.$btnAddCard=this.element.find("[data-add-card]"),this.$cardGroup=this.element.find("[data-card-group]"),this.$cardList=this.element.find("[data-card-list]"),this.$cardForm=this.element.find("[data-card-form]"),this.$cardDesc=this.element.find("[data-card-desc]"),this.$cardTotal=this.element.find("[data-card-total]"),this.$formFootnote=this.element.find("[data-form-footnote]"),this.$modalCoupon=h("#accountPlanCouponCode"),this.$btnCallCoupon=this.element.find('[data-target="#accountPlanCouponCode"]'),this.$footer=this.element.find("[data-account-plan-footer]"),this.arrDnone=this.element.find("."+m),this.arrInvisible=this.element.find("."+o),this.$btnSubmitFeedback=this.element.find("[data-btn-submit-feedback]"),this.$btnSubmitVoting=this.element.find("[data-btn-submit-voting]"),this.$btnClaimOffer=this.element.find("[data-btn-claim-offer]"),this.$step3Description=this.element.find("[data-description-step-3]"),this.$step4Description=this.element.find("[data-description-step-4]"),this.$stepDeactivate=this.element.find("[data-account-plan-deactivate]"),this.$stepSuccess=this.element.find("[data-account-plan-deactivate-success]"),this.$stepComplete=this.element.find("[data-account-plan-deactivate-complete]"),this.$stepError=this.element.find("[data-account-plan-deactivate-error]"),this.$checkoutError=this.element.find("[data-checkout-error]"),this.$zendeskConfirm=this.element.find("[data-account-plan-deactivate-zendesk]"),this.$zendeskCancelBtn=this.element.find("[data-zendesk-cancel-btn]"),this.$zendeskRedirectBtn=this.element.find("[data-btn-zendesk-redirect]"),this.$btnDeactivateReason=this.element.find("[data-btn-deactivate-reason]"),this.$deactivateReasonRadios=this.element.find("[data-deactivate-reason-radio]"),this.number=0,this.initEvents()},initEvents:function(){var a=this;a.element.on("show.bs.modal",function(e){a.showPlanItemEvent(e)}),a.element.on("hidden.bs.modal",function(){r=b=!1,a.$cardWrapper.removeClass(m),a.element.find(".account-plan-free-trial-wrapper").remove(),a.$form.find('input[name="is_free_trial_flow"]').val(0),c?(a.showLoadingImg(),location.reload()):a.resetCheckoutForm()}),a.$modalCoupon.on("hidden.bs.modal",function(){h(".modal.show").length&&h("body").addClass("modal-open")}),a.$form.find("input, textarea").on("input",function(){a.$formErrorMsg.html(""),a.$stepErrorMsg.html("")}),a.$planListItem.off(l).on(l,function(){a.planListItemEvent(h(this))}),a.$modalCoupon.off("coupon-code-apply."+n).on("coupon-code-apply."+n,function(e,t){a.applyPromoCodeEvent(t)}),a.$btnAddCard.off(l).on(l,function(){a.toggleCreditCardForm(!0,!1)}),a.$btnNext.off(l).on(l,function(){a.nextButtonEvent(h(this))}),a.$btnBack.off(l).on(l,function(){a.backButtonEvent()}),a.$btnDeactivate.off(l).on(l,function(e){e.preventDefault();var t=h(this),e=t.data();b=!0,e.subscriptionId=u,void 0!==e.btnStep&&1!==parseInt(e.btnStep)?a.deactivateEvent(t):a.getSubscriptionDetail(e,function(e){a.$btnDeactivateReason.data("on-save-offer",e.onSaveOffer),a.deactivateEvent(t)})}),a.$zendeskCancelBtn.off(l).on(l,function(e){e.preventDefault(),a.deactivateEvent(h(this))}),a.$zendeskRedirectBtn.off(l).on(l,function(e){e.preventDefault(),t.location.href=h(this).data("zendesk-url")}),this.$btnDeactivateReason.off(l).on(l,function(e){e.preventDefault(),b=!0,a.deactivateReason(h(this))}),a.$btnClaimOffer.off(l).on(l,function(e){e.preventDefault(),a.claimOfferEvent(h(this))}),a.$btnSubmitFeedback.off(l).on(l,function(e){e.preventDefault(),a.submitCancellationFeedbackEvent(h(this))}),a.$btnSubmitVoting.off(l).on(l,function(e){e.preventDefault(),a.element.modal("hide")}),a.changeStep(a.$accountSubscriptionList,0),a.changeStep(a.$stepDeactivate)},showPlanItemEvent:function(e){var n,i,t,a=this,s=h(e.relatedTarget),o=s.data("plan-type"),l=s.data("subscription-id"),d=s.data("checkout-only"),r=s.attr("data-edit-btn-plan"),c=h('[data-item-plan-type="'+o+'"]');if(a.$checkoutError.addClass(m),a.$formErrorMsg.removeClass("text-center"),h(".promo-code-label").remove(),p=!1,void 0!==d&&d)return a.renderCheckoutFormWithPromoIsApplied(s.data()),void s.remove();a.$btnNext.text("one-time"===o?"Next":"Change"),"one-time"===o?(n=s.data("purchased-plans").split(","),i=0,c.each(function(e,t){var a=h(t),t=a.data("item-plan-code");void 0!==t&&-1===h.inArray(t,n)&&(a.removeClass(m),i++)}),0===i?(h(".no-one-time-available-message").removeClass(m),a.$btnNext.prop("disabled",!0)):c.not(".d-none").find("input").first().trigger("click")):(c.removeClass(m),l?(a.$deactivateSubscription.html(""),e=s.data("plan-code"),s.data("deactivate-only")&&(d=s.text(),t=s.data("plan-desc"),s=s.data("price"),a.renderDeactivateSubscriptionOnlyItem(e,d,s,t)),t=h('[data-item-plan-type="'+o+'"][data-item-plan-code="'+e+'"]'),f=e,v=o,u=l,t.addClass("current-plan"),t.find(".account-plan-select-item-status").text("Current Plan").removeClass("account-plan-select-item-status--pink"),a.$modalCoupon.find('input[name="subscription_id"]').val(l),a.$btnNext.prop("disabled",!0)):a.$btnNext.text("Next"),(void 0!==r&&r?h('input[name="select_plan_code"][value="'+r+'"]'):c.not(".d-none, .current-plan").find("input").first()).trigger("click"))},renderDeactivateSubscriptionOnlyItem:function(e,t,a,n){this.$deactivateSubscription.attr("data-item-plan-code",e).html('<label class="sr-only" for="_plan_recurring_0"></label><input type="radio" name="select_plan_code" id="_plan_recurring_0" value="'+e+'"><div class="account-plan-select-item-wrapper d-block d-md-flex">  <div class="account-plan-select-item-info">    <p class="account-plan-select-item-status">Current Plan</p>    <p class="account-plan-select-item-title">'+t+'</p>    <div class="account-plan-select-item-desc">'+n+'</div>  </div>  <p class="account-plan-select-item-price" data-select-price>'+a+"</p></div>")},planListItemEvent:function(e){var t=this,a=e.hasClass("current-plan");e.hasClass(i)||(a?(t.$modalCoupon.find('input[name="plan_code"]').val(""),e.find(".account-plan-select-item-status").text("Current Plan").removeClass("account-plan-select-item-status--pink")):(f=e.data("item-plan-code"),v=e.data("item-plan-type"),t.$modalCoupon.find('input[name="subscription_id"]').val(u)),t.$form.find('input[name="plan_code"]').val(f),t.$modalCoupon.find('input[name="plan_code"]').val(f),t.$btnDeactivate.toggleClass(m,!a),t.$btnNext.prop("disabled",a),t.$planListItem.removeClass(i),e.addClass(i))},validateCheckoutEvent:function(e,n,i){var s=this;s.showLoadingImg(),h.fn.callAjaxGlobal({url:this.options.url,method:"POST",cache:!1,loader:!1,data:{action:"yah__validate_checkout",planCode:f,planType:v,promoCode:e,formCheck:g,subscriptionId:u}}).done(function(e){if(!e.success)return s.$formErrorMsg.html(e.data.message),void("function"==typeof n&&n());s.$headerPlan.addClass(o),s.$btnBack.removeClass(o),s.$promoGroup.removeClass(m);var t,a=e.data;s.$modalCoupon.find('input[name="checkout_case"]').val(a.checkoutCase),s.$form.find('input[name="checkout_case"]').val(a.checkoutCase),s.$form.find('input[name="plan_type"]').val(v),s.$accountSubscriptionList.find(".plan-display-name").html(a.planTitle),s.$accountSubscriptionList.find(".plan-display-subheadline").html(a.planSubheadline),s.$cardDesc.html(a.cartDescription),s.$cardTotal.html(a.cartDetail),"undefined"!==a.ccType&&null!==a.ccLastFour&&s.$cardList.find("[data-card-group]").html('<div class="form-radio">  <div class="form-group-wrap">    <label class="form-option">      <span class="card-tag"><i class="ico ico-cards ico-card-'+a.ccType+'"></i>        '+a.ccLastFour+'</span>      <input type="radio" name="use_cc_on_file" value="1" checked="">      <span class="checkedbox"></span>    </label>  </div></div>'),w=void 0!==a.footnote&&a.footnote?a.footnote:"",void 0!==a.checkoutCase&&3===parseInt(a.checkoutCase)?(s.$btnCallCoupon.hide(),s.$btnNext.text("Confirm")):(s.$btnCallCoupon.show(),s.$btnNext.text("Purchase")),0===a.payNow&&s.$btnCallCoupon.hide(),p=!!a.isPromoFlow&&(w&&s.$formFootnote.html(w).show(),a.promoCode&&(t="",(void 0!==a.isFreeTrial&&1===parseInt(a.isFreeTrial)||void 0===a.checkoutCase||3!==parseInt(a.checkoutCase))&&(t='<input type="hidden" name="couponCode" value="'+a.promoCode+'">'),s.$btnCallCoupon.hide().after('<p class="promo-code-label">'+t+'<span class="promo-code-text">'+a.promoCode+"</span></p>")),u=a.subscriptionId,!0),s.renderCreditCard(),s.hideLoadingImg(),"function"==typeof i&&i(e)}).fail(function(e,t,a){s.hideLoadingImg(),s.$formErrorMsg.html("Something went wrong. Please refresh this page and try again."),"function"==typeof n&&n()})},renderCreditCard:function(){this.$cardList.find('input[type="radio"]').length?this.toggleCreditCardForm(!1,!0):this.toggleCreditCardForm(!0,!1)},toggleCreditCardForm:function(e,t){this.$cardList.toggleClass(m,e),this.$cardForm.toggleClass(m,t),this.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!e)},checkoutPlanEvent:function(e,n){var i=this;i.showLoadingImg(),e.push({name:"action",value:"yah__checkout_plan"},{name:"formCheck",value:g},{name:"subscription_id",value:u},{name:"isPromoFlow",value:p?1:0}),h.fn.callAjaxGlobal({url:this.options.url,method:"POST",cache:!1,loader:!1,data:h.param(e)}).done(function(e){return e.success?(c=!0,i.$headerPlan.addClass(o),i.$btnBack.addClass(o),i.$promoGroup.addClass(m),i.$btnNext.addClass(m),i.$formFootnote.html("").hide(),void i.hideLoadingImg()):(i.$formErrorMsg.html(e.data.message),void("function"==typeof n&&n()))}).fail(function(e,t,a){i.hideLoadingImg(),i.$formErrorMsg.html("Something went wrong. Please refresh this page and try again."),"function"==typeof n&&n()})},applyPromoCodeEvent:function(e){var t=this,a=this.element,n=this.$btnCallCoupon,i=h('<p class="promo-code-label"></p>'),s=e.promo_code,o=e.plan_data;d={title:t.$accountSubscriptionList.find(".plan-display-name").html(),desc:t.$accountSubscriptionList.find(".plan-display-subheadline").html(),totalDetail:t.$cardTotal.html(),noCcRequired:void 0!==e.noccrequired&&e.noccrequired,useCcOnFile:t.$cardList.find('input[name="use_cc_on_file"]').is(":checked")},i.append('<input type="hidden" name="couponCode" value="'+s+'"><span class="promo-code-text">'+s+'</span><span class="icon-close"></span>'),n.hide().after(i),t.$cardTotal.find(".pay-now span").html(e.payNow),t.$modalCoupon.modal("hide"),void 0!==e.discount?(t.$cardTotal.find(".total-detail span").html(e.credit),t.$cardTotal.find(".total-detail").append("<p>- Discount: "+e.discount+"</p>"),""!==w&&(t.$cardTotal.find(".account-discount").remove(),t.$formFootnote.html(w).show())):t.$cardTotal.append('<div class="total-detail">promo applied!</span>'),void 0!==e.subtotal&&t.$cardTotal.find("span.mid-month-price").html(e.subtotal),t.prepareFreeTrialFlow(e),a.find(".icon-close").on(l,function(){t.$cardDesc.removeClass(m),d.noCcRequired&&(t.$cardList.removeClass(m),t.$cardForm.addClass(m),t.$formErrorMsg.html("")),d.noCcRequired=!1,t.$accountSubscriptionList.find(".plan-display-name").html(d.title),t.$accountSubscriptionList.find(".plan-display-subheadline").html(d.desc),t.$cardTotal.html(d.totalDetail).removeClass(m),t.$form.find('input[name="plan_code"]').val(f),t.$formFootnote.html("").hide(),(d.useCcOnFile||void 0!==e.noccrequired&&e.noccrequired)&&t.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!0),i.remove(),n.show()}),d.noCcRequired&&(t.$accountSubscriptionList.find(".plan-display-name").html(o.name),t.$accountSubscriptionList.find(".plan-display-subheadline").html(o.desc),t.$form.find('input[name="plan_code"]').val(e.plan_code),t.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!1),t.$cardList.addClass(m),t.$cardForm.addClass(m),t.$cardDesc.addClass(m),t.$cardTotal.addClass(m),t.$formFootnote.html("").hide(),t.resetCard())},renderCheckoutFormWithPromoIsApplied:function(e){var t=this,a=e.promoCode;f=e.planCode,v=e.planType,g=t.$btnNext.data("form-check"),u=null,t.validateCheckoutEvent(a,function(e){t.$headerPlan.addClass(o),t.hideLoadingImg(),t.$btnNext.addClass(m),t.$checkoutError.removeClass(m),t.$formErrorMsg.addClass("text-center")},function(e){t.$checkoutError.addClass(m),t.$formErrorMsg.removeClass("text-center"),t.$btnBack.addClass(o),t.number=1,t.changeStep(t.$accountSubscriptionList,t.number),t.$form.find('input[name="plan_code"]').val(f),t.prepareFreeTrialFlow(e.data),h("body").addClass("modal-open")})},prepareFreeTrialFlow:function(e){var t=this;void 0!==e.isFreeTrial&&1===parseInt(e.isFreeTrial)&&(r=!0,t.$headerPlan.removeClass(o),t.$btnNext.text("Start Free Trial"),t.$btnBack.addClass(o),t.$cardWrapper.parent().append('<div class="account-plan-free-trial-wrapper">  <div class="account-plan-select-item">    <input type="radio" name="free-trial-plan" id="free-trial-plan" value="'+e.planCode+'">    <div class="account-plan-select-item-wrapper d-block d-md-flex">      <div class="account-plan-select-item-info">        <p class="account-plan-select-item-status account-plan-select-item-status--pink"></p>        <p class="account-plan-select-item-title">'+e.planTitle+'</p>        <div class="account-plan-select-item-desc">'+e.planSubheadline+'</div>      </div>      <p class="account-plan-select-item-price">'+e.planPrice+"</p>    </div>  </div></div>"),t.$cardWrapper.addClass(m),t.element.find("#free-trial-plan").trigger("click"),t.$form.find('input[name="is_free_trial_flow"]').val(1),t.$form.find('input[name="plan_code"]').val(e.planCode),t.element.find(".icon-close").remove())},showLoadingImg:function(){this.$loading.removeClass(m),this.$form.addClass(m),this.$formErrorMsg.html(""),this.$stepErrorMsg.html("")},hideLoadingImg:function(){this.$loading.addClass(m),this.$form.removeClass(m)},nextButtonEvent:function(e){var t=this;if(t.number+=1,g=e.data("form-check"),r||t.$btnNext.text("Purchase"),1===t.number)t.validateCheckoutEvent(null,function(){--t.number,t.changeStep(t.$accountSubscriptionList,t.number),t.hideLoadingImg(),t.$btnNext.text("one-time"===v||null===u?"Next":"Change")});else if(2===t.number&&t.$cardForm.is(":visible")&&!t.$form["form-validate"]("handleValidate").valid())return void--t.number;t.number===t.$accountSubscriptionList.length-1&&(e=t.$form.serializeArray(),t.checkoutPlanEvent(e,function(){--t.number,t.changeStep(t.$accountSubscriptionList,t.number),t.hideLoadingImg()})),t.changeStep(t.$accountSubscriptionList,t.number)},backButtonEvent:function(){var e=this;e.$zendeskConfirm.addClass(m),b?4===C||3===C?(C--,e.changeDeactivateStep(C)):(e.number=0,e.changeStep(e.$accountSubscriptionList,e.number),e.$footer.removeClass(m),e.$headerPlan.removeClass(o),e.$stepDeactivate.addClass(m),e.$btnBack.addClass(o)):(--e.number,e.$formErrorMsg.html(""),e.$stepErrorMsg.html(""),e.$promoGroup.find(".icon-close").trigger(l),e.number<1&&(e.$headerPlan.removeClass(o),e.$btnBack.addClass(o),e.$promoGroup.addClass(m),e.$btnNext.text("one-time"===v||null===u?"Next":"Change"),e.resetCard()),e.changeStep(e.$accountSubscriptionList,e.number))},changeStep:function(e,t){e.addClass(m),e.eq(t).removeClass(m)},resetCheckoutForm:function(){this.element.find("."+m).removeClass(m),this.element.find("."+o).removeClass(o),this.element.find("."+i).removeClass(i),this.arrDnone.addClass(m),this.arrInvisible.addClass(o),this.$formErrorMsg.html(""),this.$stepErrorMsg.html(""),this.$formFootnote.html("").hide(),this.resetCard(),this.element.find(".icon-close").triggerHandler("click"),this.$planListItem.filter('[data-select-current="1"]').last().triggerHandler("click"),this.number=0,this.changeStep(this.$accountSubscriptionList,this.number),this.changeStep(this.$stepDeactivate)},resetCard:function(){this.$form.find("label.error").html(""),this.$cardForm.find("input").val(""),this.$cardForm.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),this.element.find(".validate-error").hide()},getSubscriptionDetail:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e.data)}).fail(function(e,t,a){})},deactivateEvent:function(t){var e,a=this,n=t.data("btn-step");C=n,a.$zendeskConfirm.addClass(m),void 0===n||""===n?a.cancelSubscriptionEvent(t):1===parseInt(n)||2===parseInt(n)?(a.$footer.addClass(m),a.$headerPlan.addClass(o),a.$accountSubscriptionList.addClass(m),a.$btnBack.removeClass(o),a.changeDeactivateStep(n)):3===parseInt(n)?((e=t.data()).subscriptionId=u,e.selectedReason=y,a.getCancellationFlowData(e,function(e){e.success?void 0!==e.data.showOffer&&e.data.showOffer?(s=e.data,a.renderSelectList(),void 0!==s.currentPlan&&null===s.currentPlan&&(n++,C=3),a.changeDeactivateStep(n)):(c=!0,t.closest(".account-plan-status").addClass(m),t.closest(".account-plan-status").next().addClass(m),a.showStatusDeactivate(!0,!1,!0)):a.$stepErrorMsg.html(e.data.message)})):4===parseInt(n)&&(void 0!==s.onDemandOffer&&s.onDemandOffer?a.changeDeactivateStep(n):a.cancelSubscriptionEvent(t))},deactivateReason:function(e){var t=this,a=t.$deactivateReasonRadios.find("input:checked"),n=a.data("reason-id"),i=e.data("on-save-offer");void 0===n?location.reload():(y=a.parent(".radio-wrapper").find("span").text(),n=parseInt(n),t.$btnBack.addClass(o),1===n||3===n||4===n||6===n||7===n?void 0!==i&&1===parseInt(i)?t.cancelSubscriptionEvent(e,{action:e.data("cancel-action"),formCheck:e.data("cancel-form-check")}):t.deactivateEvent(e):2===n||5===n?(t.element.find(".account-plan-status").addClass(m),t.$zendeskConfirm.removeClass(m)):(C=2,t.changeDeactivateStep(2)))},changeDeactivateStep:function(e){this.$stepDeactivate.addClass(m),this.$stepDeactivate.parent().find('[data-step="'+e+'"]').removeClass(m)},submitCancellationFeedbackEvent:function(e){var t=this,a=e.closest(".account-plan-status"),n=e.data(),e=a.find('textarea[name="feedback-message"]').val();1===parseInt(n.isFeedbackOnly)&&e.length<1?t.$stepErrorMsg.html("Please fill in the details to submit your ticket!"):(n.feedbackMessage=e,n.selectedReason=y,n.subscriptionId=u,t.submitCancellationFeedback(n,function(e){void 0!==e.isFeedbackOnly&&e.isFeedbackOnly?(a.addClass(m),t.showStatusDeactivate(!1,!0,!0)):t.element.modal("hide")}))},submitCancellationFeedback:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){c=!0,a.hideLoadingImg(),"function"==typeof t&&t(e.data)}).fail(function(e,t,a){})},claimOfferEvent:function(e){var t=this,a=e.data(),e=e.closest(".account-plan-select").find('input[type="radio"]:checked');a.subscriptionId=u,a.planCode=e.val(),a.promoCode=e.data("promo-code"),a.selectedReason=y,t.claimOffer(a,function(e){e.success?(c=!0,t.$stepSuccess.removeClass(m)):(t.$stepError.removeClass(m),t.$stepError.find(".deactivate-error-msg").html(e.data.message)),t.$btnBack.addClass(o)})},claimOffer:function(e,t){var n=this;n.showLoadingImg(),n.$stepErrorMsg.html(""),n.changeDeactivateStep(-1),h.fn.callAjaxGlobal({url:n.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){n.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){n.hideLoadingImg(),n.$stepError.removeClass(m),n.$stepError.find(".deactivate-error-msg").html("Something went wrong! Please refresh this page and try again."),n.$btnBack.addClass(o)})},getCancellationFlowData:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"GET",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){})},cancelSubscriptionEvent:function(e,t){var a=this,e=e.data();void 0!==t&&t&&(e=t),e.subscriptionId=u,e.selectedReason=y,a.cancelSubscription(e,function(e){e.success?(c=!0,a.changeDeactivateStep(-1),a.$stepComplete.removeClass(m),a.$btnBack.addClass(o)):a.$stepErrorMsg.html(e.data.message)})},cancelSubscription:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){})},showStatusDeactivate:function(e,t,a){this.$stepSuccess.toggleClass(m,e),this.$stepComplete.toggleClass(m,t),this.$stepError.toggleClass(m,a),this.$btnBack.addClass(o)},renderSelectList:function(){function e(e,t){if(void 0!==e&&e&&void 0!==e.planCode){var a=t?"recurring_plan_code":"ondemand_plan_code";return void 0!==e.planSubDesc&&e.planSubDesc&&(t?n.$step3Description:n.$step4Description).html(e.planSubDesc),'<div class="account-plan-select-item">  <input type="radio" name="'+a+'" value="'+e.planCode+'" data-promo-code="'+e.promoCode+'">  <div class="account-plan-select-item-wrapper d-block d-md-flex">    <div class="account-plan-select-item-info">      <span class="account-plan-select-item-status  account-plan-select-item-status--pink">'+e.planSubHeadline+'</span>      <p class="account-plan-select-item-title">'+e.planName+"</p>      <div>"+e.planDesc+'</div>    </div>    <p class="account-plan-select-item-price" data-select-price>'+e.planPrice+"</p>  </div></div>"}return""}var n=this,t=n.element.find("[data-recurring-offer]"),a=n.element.find("[data-on-demand-offer]"),i=void 0!==s&&s?s:{};t.html(e(i.currentPlan,!0)),t.find("input:radio").prop("checked",!0),a.html(e(i.onDemandOffer,!1)),a.find("input:radio").prop("checked",!0)},destroy:function(){h.removeData(this.element[0],n)}},h.fn[n]=function(t,a){return this.each(function(){var e=h.data(this,n);e?e[t]&&e[t](a):h.data(this,n,new $(this,t))})},h.fn[n].defaults={url:yahAjax.ajaxurl},h(function(){h("[data-"+n+"]")[n]()})}(jQuery,window),function(o){"use strict";var n="preferences",a={};function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$inputPreferences=this.element.find(this.options.dataInputPreferences),this.$inputActive=null,this.getPreferenceData(),this.searchTagEvent()},searchTagEvent:function(){var t=this;t.element.on("click",".tagsinput",function(){var e=o(this).find("input");(t.$inputActive=e).autocomplete("search")})},initTagsInput:function(){var s=this;o.each(a,function(e,t){var a,n,e=o(s.options.dataInputPreferences+'[data-preferences-name="'+e+'"]'),i=e.closest(".content-group").find(".ui-autocomplete-wrapper");e.autocomplete({source:t.options}).val(t.selected),e.tagsInput({placeholder:s.options.tagsInputPlaceholder,autocomplete:{appendTo:i[0],delay:500,source:t.options,minLength:0,open:function(){void 0!==a&&n.destroy(),i.find(".ui-autocomplete > li").wrapAll(o('<div class="scroll-panel"></div>').css({"max-height":"calc(100vh - 400px)",width:o(".ui-autocomplete").width()})),a=i.find(".scroll-panel").jScrollPane(),n=a.data("jsp")},close:function(e,t){n.destroy(),a=void 0}},onAddTag:function(e,t){s.updatePreferenceData(o(e))},onRemoveTag:function(e,t){s.updatePreferenceData(o(e))}})})},getPreferenceData:function(){var t=this;o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",loader:!0,data:{action:"yah_get_preferences"}}).done(function(e){e&&e.success&&(a=e.data.dataPreferences,t.initTagsInput())}).fail(function(e,t,a){})},updatePreferenceData:function(e){var t=e.attr(this.options.dataPreferencesName),a=e.data(this.options.dataFormCheck);o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"yah_update_preferences",preferencesName:t,data:e.val(),formcheck:a},loader:!0}).done(function(e){}).fail(function(e,t,a){})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={tagsInputPlaceholder:"None selected.",dataInputPreferences:"[data-suggest-preferences]",dataPreferencesName:"data-preferences-name",dataFormCheck:"formcheck"},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(n){"use strict";var i="profile";function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.input=this.element.find(".form-control"),this.btnEditProfile=this.element.find(".btn-edit-profile"),this.btnDeleteProfile=this.element.find(".btn-delete-avatar")},handleEvent:function(){this.input.on("input",function(){var e=n(this);e.data("text-content")!=e.val()?(e.siblings(".btn-small").removeClass("d-none"),e.addClass("text-change")):(e.siblings(".btn-small").addClass("d-none"),e.removeClass("text-change"))}),this.input.on("blur",function(){n(this).scrollTop(0)})},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(r,c){"use strict";var n="upload-avatar";function i(e,t){this.element=r(e),this.options=r.extend({},r.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.input=this.element.find("input.file-input"),this.avatarEl=r("body").find("img.avatar-img"),this.$btnDeleteAvatar=this.element.find(".btn-delete-avatar"),this.$btnConfirmDeleteAvatar=r(document).find(".del-avatar-confirm")},handleEvent:function(){this.onUploadAvatar(),this.onConfirmDeleteAvatar()},onUploadAvatar:function(){var i=this,e=i.element,s=i.avatarEl,o=e.find(".upload-avatar-result"),l=i.options.fileSizeLimit||2097152,d=["image/gif","image/jpeg","image/png"];o.html("").addClass("d-none"),i.element.on("submit",function(e){e.preventDefault();var t,a,n=r(this).find('input[type="file"]')[0].files[0],e=Math.round(l/1024/1024);d.includes(n.type)?n.size>l?o.html("This profile image is too large to upload. Please use an image smaller than "+e+"MB.").removeClass("d-none"):(t=r('<div style=" width: 1%; height: 15px; background-color: #f18d7e; position: fixed; z-index: 10000; bottom: 0; "></div>'),a=r('<div style=" width: 100%; height: 30px; text-align: right; position: fixed; z-index: 10001; bottom: 2em; "><h3 style="color: #f18d7e;">Uploading image...</h3></div>'),r("body").append(t).append(a),o.html("Uploading image...").removeClass("d-none"),r.ajax({url:yahAjax.ajaxurl,type:"POST",processData:!1,contentType:!1,data:new FormData(this),cache:!1,success:function(e){t.remove(),a.remove(),e.success?void 0!==e.data.imgBase64&&""!==e.data.imgBase64&&(s.attr("src",e.data.imgBase64),o.html("").addClass("d-none"),i.$btnDeleteAvatar.css("display","block")):o.html(e.data.message).removeClass("d-none")},error:function(e){t.remove(),a.remove(),o.html("Unable to upload file.").removeClass("d-none")},xhr:function(){var e=new c.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total,t.css("width",100*e+"%"))},!1),e}})):o.html("Please upload only image file.").removeClass("d-none")}),this.input.on("change",function(){e.submit()})},onConfirmDeleteAvatar:function(){var t=this;this.$btnConfirmDeleteAvatar.off("click").on("click",function(e){e.preventDefault();r(e.target);r.fn.callAjaxGlobal({method:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:"delete_avatar",formcheck:t.$btnDeleteAvatar.attr("data-form-check")},loader:!0}).done(function(e){e.success&&(r(".avatar-img").attr("src",t.$btnDeleteAvatar.attr("data-default-img")),r(".file-input").val(""),t.$btnDeleteAvatar.css("display","none"))}).fail(function(e,t,a){console.log("smth going wrong: "+a)})})},destroy:function(){r.removeData(this.element[0],n)}},r.fn[n]=function(t,a){return this.each(function(){var e=r.data(this,n);e?e[t]&&e[t](a):r.data(this,n,new i(this,t))})},r.fn[n].defaults={fileSizeLimit:2097152},r(function(){r("[data-"+n+"]")[n]()})}(jQuery,window),function(o){"use strict";var n="nav-tabs";function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.tabs(),this.display()},display:function(){var e=this.element,t=e.prev(".yoga-challenge-loader"),a=e.find(".tab-link"),n=e.find(".tab-pane"),i=e.find(".ywc-hero-image"),s=e.find(".ywc-timeline");e.hide(),this.setTabActive(a),this.setTabActive(n),t.hide(),i.show(),s.show(),e.show()},setTabActive:function(e){var t=new Date,a=t.getFullYear(),n=(t.getMonth()+1).toString(),n=1<n.length?n:"0"+n,t=t.getDate().toString(),i=a+"-"+n+"-"+(1<t.length?t:"0"+t),s=!1;e.removeClass("selected-day"),e.each(function(e,t){t=o(t);t.data("tab-date")===i&&(s=!0,t.addClass("selected-day"))}),!1===s&&e.first().addClass("selected-day")},tabs:function(){var n=this.element,e=n.find("[data-tab]"),i=o(".video-items");e.on("click",function(e){e.preventDefault();var t=o(this),e=t.attr("data-tab");n.find(".tab-nav li, .tab-list .tab-pane").removeClass("selected-day"),t.addClass("selected-day"),n.find("#"+e).addClass("selected-day"),i.slick("setPosition",0),i.find("[data-textpanel]").textpanel("reInit");e=o(".tab-pane#"+e).data("day-img");o(".hero-image").prop("src",e);var a=0,e=o(".selected-day .question-answer li a");e.each(function(e,t){o(t).innerHeight()>a&&(a=o(t).innerHeight())}),e.each(function(e,t){o(t).css("height",a+"px")})})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={key:"value",onCallback:null},o(function(){var e=o("[data-"+n+"]");e.on("customEvent",function(){}),e[n]({key:"custom"})})}(jQuery,window),function(o){"use strict";var n="comment",a="input."+n,e="click."+n,l=null,i=null;function s(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.cacheDOM(),this.renderCommentList(),this.handleEvents(),this.convertCommentDate()},cacheDOM:function(){this.$blockDetail=this.element.find("[data-comment-block-detail]"),this.$commentItems=this.element.find("[data-comment-item]"),this.$inputComment=this.element.find("[data-enter-comment]"),this.$btnSave=this.element.find("[data-btn-save-comment]"),this.$btnTotal=this.element.find("[data-total]"),this.$modalReply=o("#reply-comment"),this.$inputReply=this.$modalReply.find("[data-reply-content]"),this.$btnReplyModal=this.$modalReply.find("[data-btn-submit]"),this.totalComment=this.$commentItems.length},handleEvents:function(){var t=this;this.element.on("click","[data-comment-item] .btn-reply",function(e){e.preventDefault(),i=o(this).closest("[data-comment-item]"),l=i.data("comment-id")}),this.$modalReply.on("hidden.bs.modal",function(){t.$inputReply.val(""),l=null}),this.$btnReplyModal.off(e).on(e,function(e){e.preventDefault(),t.handleReplyComment()}),this.$inputComment.off(a).on(a,function(){var e=o(this).val();t.$btnSave.toggleClass("active",0<e.length)}),this.$btnSave.off(e).on(e,function(e){e.preventDefault(),t.handleAddComment()}),this.$btnTotal.off(e).on(e,function(e){e.preventDefault(),t.showAllComments()})},handleReplyComment:function(){var t=this;0!==this.$inputReply.val().length&&this.postComment(this.$inputReply,function(e){t.renderComment(e,i,"append"),t.$modalReply.modal("hide"),t.updateHistoryState()})},handleAddComment:function(){var t=this;this.postComment(this.$inputComment,function(e){t.renderComment(e,t.$blockDetail,"prepend"),t.$inputComment.val("").trigger(a),t.updateHistoryState()})},updateHistoryState:function(){history.pushState("",document.title)},postComment:function(e,t){var a=e.data("video-id"),n=o.trim(e.val()),i=e.data("form-check"),s=!1;e.val(""),0<n.length&&!s&&(s=!0,o.fn.callAjaxGlobal({type:this.options.method,url:this.options.url,method:"POST",data:{action:"post_comment",videoId:a,commentId:l,comment:n,formCheck:i},cache:!1,loader:!0}).done(function(e){"function"==typeof t&&t(e),s=!1}).fail(function(e,t,a){}))},renderComment:function(e,t,a){var n,i,s;e.success?(n=e.data.commentData,i=t[0].hasAttribute("data-comment-item"),s='<div class="comment-item-wrapper"> <div class="comment-item-content">'+n.comment+'</div> <div class="comment-item-name"><p>'+n.name+'</p></div> <div class="comment-item-date"><p data-comment-date="'+n.date+'"></p></div>'+(i?"":'<a class="btn-reply" href="#" data-toggle="modal" data-target="#reply-comment">Reply</a>')+"</div>",e="",e=i?'<div class="comment-item-reply" style="display: none;" id="comment-'+n.commentId+'">'+s+"</div>":'<div class="comment-item" id="comment-'+n.commentId+'" data-comment-item     data-comment-id="'+n.commentId+'">'+s+"</div>",t[a](e),o("#comment-"+n.commentId).fadeIn(1e3),this.convertCommentDate()):console.log("Error scenario here...")},renderCommentList:function(){for(var e,t=Math.min(this.options.itemsToShow,this.totalComment),a=0;a<t;a++)this.$commentItems.eq(a).addClass("d-block");this.options.itemsToShow>=this.totalComment||0===this.totalComment.length?this.$btnTotal.hide():(e=parseInt(this.totalComment)-parseInt(this.options.itemsToShow),this.$btnTotal.children().text("All "+e+" Comments"))},showAllComments:function(){for(var e=this.options.itemsToShow;e<this.totalComment;e++)this.$commentItems.eq(e).fadeIn(1e3);this.$btnTotal.fadeOut(500)},convertCommentDate:function(){var t=this;o("[data-comment-date]").each(function(){var e=o(this).data("comment-date"),e=moment(e);o(this).html(e.format(t.options.dateFormat))})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new s(this,t))})},o.fn[n].defaults={method:"POST",itemsToShow:3,dateFormat:"MM/DD/YYYY",url:yahAjax.ajaxurl},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window);var Myw=Myw||{};Myw.Member={updateLike:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"like_video",wpId:e,liked:t},success:function(e){a(e)}})},updateArticleLike:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"like_article",wpId:e,liked:t},success:function(e){a(e)}})},postComment:function(e,t,a,n){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"post_comment",asset_id:e,title:t,comment:a},success:function(e){n(e)}})}},Myw.Common={post:function(e,t){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:e,success:function(e){t(e)}})},postConfirmPage:function(e,t,a){$title=jQuery("<input>").attr("name","title").attr("type","text").val(e),$tagline=jQuery("<input>").attr("name","tagline").attr("type","text").val(t),$form=jQuery("<form>").attr("method","post").attr("action",a).attr("style","display:none;").append($title).append($tagline).appendTo("body").submit()},postReactivatePage:function(e,t,a){$plan=jQuery("<input>").attr("name","plan").attr("type","text").val(e),$promo=jQuery("<input>").attr("name","promoCode").attr("type","text").val(t),$form=jQuery("<form>").attr("method","post").attr("action",a).attr("style","display:none;").append($plan).append($promo).appendTo("body").submit()},formatAuthorName:function(e,t){if(void 0===e||e.length<1)return"";var a=e.split(" ");return 1===a.length?e:a[0]+" "+a[1].substring(0,1)+(t?".":"")}},Myw.Reply={postReplyComment:function(e,t,a,n){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_reply_comment",reply:e,commentId:t,postId:a},success:function(e){n(e)}})}},Myw.Edit={postEditComment:function(e,t,a,n,i){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_edit_comment",reply:e,commentId:t,postId:a,userId:n},success:function(e){i(e)}})}},Myw.Delete={postDeleteComment:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_delete_comment",commentId:e,userId:t},success:function(e){a(e)}})}},function(g,s){"use strict";var n="form-validate",a=/^(?!\s)(?!.*\s$)[a-zA-Z0-9\s()-]+$/,o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\w\W]{8,}$/,l=/^([a-zA-Z0-9_.+-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,d=/^([a-zA-Z0-9_.-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,r=/^[A-Za-z0-9 ]+$/,c="disabled",b="d-none",h="MM/YY",i=null,m=null,u=null,e="click."+n;function p(e,t){this.element=g(e),this.options=g.extend({},g.fn[n].defaults,this.element.data(),t),this.init()}p.prototype={init:function(){this.initValidate(),this.cacheDOM(),this.handleEvent()},initValidate:function(){var i=s.moment().format(h);g.validator.addMethod("regexName",function(e,t){return a.test(e)}),g.validator.addMethod("regexPwd",function(e,t){return o.test(e)}),g.validator.addMethod("regexEmail",function(e,t){return(void 0!==yahAjax.allowPlus&&yahAjax.allowPlus?l:d).test(e)}),g.validator.addMethod("regexZip",function(e,t){return r.test(e)}),g.validator.addMethod("expiration",function(e,t){var a,n=!1;return 4<e.length&&(a=s.moment(e,h),e=s.moment(i,h),n=-1<a.diff(e,"months")),n})},cacheDOM:function(){this.$form=this.element,this.$btnSubmit=this.element.find("[data-btn-submit]"),this.$btnGiftCode=this.element.find("[data-btn-gift-code]"),this.$btnRedeemGiftCardCode=this.element.find("[data-btn-redeem-gift-card-code]"),this.$onboardingStart=this.element.find("[data-btn-onboarding-start]"),this.$onboardingCheckout=this.element.find("[data-btn-onboarding-checkout]"),this.$btnUpdatePassword=this.element.find("[data-btn-update-password]"),this.$btnCouponCode=this.element.find("[data-btn-coupon]"),this.$btnSettingsPaymentMethod=this.element.find("[data-btn-settings-payment-method]"),this.$btnSettingsGiftCardCode=this.element.find("[data-btn-settings-redeem-gift-card-code]"),this.$btnSettingsRedeemCode=this.element.find("[data-btn-settings-redeem-code]"),this.$btnCheckoutRedeemCode=this.element.find("[data-btn-checkout-redeem-code]"),this.$btnUpdatePlan=this.element.find("[data-btn-update-plan]"),this.$btnUpdateOnetimePlan=this.element.find("[data-btn-update-onetime-plan]"),this.$chbxIntlPayment=this.element.find("[data-intl-payment]"),this.$btnTfaConfirm=this.element.find("[data-btn-tfa-confirm]"),this.$btnTfaRequestCode=this.element.find("[data-btn-tfa-request-again]"),this.$btnTfaUpdatePhone=this.element.find("[data-btn-tfa-update-phone-number]"),this.$btnTfaSettingsConfirm=this.element.find("[data-btn-tfa-settings-confirm]"),this.$btnTfaSettingsRequestCode=this.element.find("[data-btn-tfa-settings-request-again]")},handleEvent:function(){var i=this;this.$btnSubmit.off(e).on(e,function(){i.handleValidate()}),this.$onboardingStart.off(e).on(e,function(){i.handleValidate(ywah_onboarding_helper.submit_onboarding_start)}),this.$onboardingCheckout.off(e).on(e,function(){var t=g(this);i.element.find(".general-error").html(""),i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_checkout(e,function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnGiftCode.off(e).on(e,function(e){var a=g(this);i.handleValidate(function(t){a.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_gift_code(t,function(e){i.redeemCouponCode(t,e),a.prop("disabled",!1).removeClass(c)},function(){a.prop("disabled",!1).removeClass(c)})})}),this.$btnRedeemGiftCardCode.off(e).on(e,function(e){var t=g(this),a=g(".ywah-onboarding-checkout"),n=a.find(".title-wrapper");i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_redeem_gift_card_code(e,function(e){g("#giftCardCode").modal("hide"),void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow?(a.find('input[name="gift_card_code"]').val(e.gift_code),a.find('input[name="plan_code"]').val(e.plan_code),a.find(".title-wrapper").html(e.cart_detail),a.find(".wrap-apple").hide(),a.find("[data-apple-pay-wrap]").hide(),a.find(".onboarding-subscription").hide(),g(".onboarding-checkout-plan-list").hide(),g(".onboarding-checkout").show()):(g("[data-cart-detail-wrap]").html(e.cart_detail).show(),a.find('input[name="gift_card_code"]').val(e.gift_code),a.find('input[name="plan_code"]').val(e.plan_code),g('.checkout-form-promo input[name="plan_code"]').val(e.plan_code),t.prop("disabled",!1).removeClass(c),g(".apply-code span").trigger("click"),g("[data-promo-code-open-popup-btn]").removeClass("d-inline-block").addClass("d-none"),g(".onboarding-subscription-item").removeClass("active"),g(".onboarding-plan-item").removeClass("active").removeAttr("data-subscribe-tab").find("input").remove(),g(".onboarding-plan-primary .title-wrapper").hide(),g(".onboarding-plan-secondary").hide(),g("[data-onboarding-other-plan]").hide(),g(".onboarding-subscription-switch").hide(),n.find("[data-step-title]").html(e.plan_name),n.find("[data-step-desc]").html(e.plan_desc),a.find(".cc-form-inputs").hide(),a.find(".intl-payment-wrap").hide(),g("[data-apple-pay-wrap]").hide(),g("[data-btn-onboarding-checkout]").text("Start Now"))},function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnUpdatePassword.off(e).on(e,function(e){i.handleValidate(function(e){i.handleUpdatePassword(e)})}),this.$btnCouponCode.off(e).on(e,function(e){i.handleValidate(function(e){i.handleCouponCode(e)})}),this.$btnSettingsPaymentMethod.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_payment_method)}),this.$btnSettingsGiftCardCode.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_redeem_gift_card_code)}),this.$btnSettingsRedeemCode.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_redeem_code)}),this.$btnCheckoutRedeemCode.off(e).on(e,function(e){var t=g(this);i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_gift_code(e,function(e){g("[data-account-plan-management]")["account-plan-management"]("applyPromoCodeEvent",e),t.prop("disabled",!1).removeClass(c)},function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnUpdatePlan.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_update_plan)}),this.$btnUpdateOnetimePlan.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_add_onetime_plan)}),i.$chbxIntlPayment.off(e).on(e,function(){var e=g(this).is(":checked"),t=i.element.find('.cc-form-inputs [name="zip"]');t.closest(".form-group").parent().toggle(!e).find("label.error").remove(),t.removeClass("error").val("")}),i.$btnTfaConfirm.off(e).on(e,function(){i.handleValidate(ywah_onboarding_helper.submit_onboarding_tfa_verify)}),i.$btnTfaRequestCode.off(e).on(e,function(e){e.preventDefault(),ywah_onboarding_helper.submit_onboarding_tfa_request(i.$form)}),i.$btnTfaSettingsConfirm.off(e).on(e,function(){i.handleValidate(ywah_settings_payments_helper.submit_setting_tfa_verify)}),i.$btnTfaSettingsRequestCode.off(e).on(e,function(e){e.preventDefault(),ywah_settings_payments_helper.submit_setting_tfa_request_again(i.$form)}),i.$btnTfaUpdatePhone.off(e).on(e,function(){i.handleValidate(ywah_settings_payments_helper.submit_setting_tfa_request)}),this.element.closest(".modal").on("hidden.bs.modal",function(){var e=g(this).find("form");e[0].reset(),e.find("label.error").html(""),e.find(".general-error").remove()})},handleValidate:function(e){var a=this;"function"==typeof e&&(u=e),this.$form.validate({rules:{name:{required:!0,regexName:!0,maxlength:100},first_name:{required:!0,regexName:!0,maxlength:50},last_name:{required:!0,regexName:!0,maxlength:50},email:{required:!0,regexEmail:!0,maxlength:100},password:{required:!0,regexPwd:!0},newPassword:{required:!0,regexPwd:!0},confirmPassword:{required:!0,regexPwd:!0,equalTo:"#newPassword"},agree:{required:!0},card_number:{required:!0,creditcard:!0},card_exp:{required:!0,expiration:!0},card_cvv:{required:!0,minlength:3,number:!0},gift_code:{required:!0},zip:{regexZip:!0,required:!0,minlength:5,maxlength:5},phone_number:{required:!0,minlength:4,number:!0},otp_code:{required:!0,number:!0,minlength:6,maxlength:6}},messages:{name:"Please enter a valid name",first_name:"Please enter a valid first name",last_name:"Please enter a valid last name",email:"Please enter a valid email address",password:"Password should be at least 8 characters, with at least 1 upper case, 1 lower case, and 1 number",confirmPassword:"Passwords don't match",newPassword:{required:"Please enter a valid password",regexPwd:"Password should be at least 8 characters, with at least 1 upper case, 1 lower case, and 1 number"},agree:"Please agree to our policy",card_number:"Please enter valid credit card number",card_exp:"Please enter a valid expiration",card_cvv:"Please enter a valid CVV Code",gift_code:"Please enter a valid number",zip:"Please enter a valid Zip Code",phone_number:"Please enter a valid Phone Number",otp_code:"Invalid Code."},submitHandler:function(e,t){a.options.useRecaptcha&&"function"==typeof u?(t.preventDefault(),g.fn.reCaptchaExecute(),i=u,m=e,a.resetCallBackFunc()):"function"==typeof u?(u(e),a.resetCallBackFunc()):a.callAjax(e)},errorPlacement:function(e,t){t.closest(".form-group-wrap").after(e.addClass("validate-error"))}})},resetCallBackFunc:function(){setTimeout(function(){u=null},0)},onSubmitEvents:function(e){var t,a;"function"==typeof i&&null!==m&&((a=(t=g(m)).find('input[name="recaptcha_token"]')).length?a.val(e):t.append('<input type="hidden" name="recaptcha_token" value="'+e+'">'),i(t.get(0)),i=m=null,g.fn.reCaptchaReset())},redeemCouponCode:function(e,t){var a=this,n=g(".ywah-onboarding-checkout"),i=n.find(".cc-form-inputs"),s=n.find('input[name="plan_code"]'),o=n.find("[data-subscribe-promo]"),l=n.find(".intl-payment-wrap"),d=l.find("[data-intl-payment]"),r=g(".ywah-onboarding-checkout-new").find('input[name="gift_code"]'),c=g(e),h=c.find('input[name="gift_code"]'),m=h.val(),u=c.find('input[name="one_checkout"]'),p=u?parseInt(u.val()):0,e=c.closest(".modal-gift-code"),u=e.attr("id"),f=g('[data-target="#'+u+'"]'),v=g('<div class="apply-code"></div>'),c=void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow,u=c?"div":"p",u=["<"+u+">"+(c?"PROMO CODE: ":"APPLIED: ")+"<span>"+m+"</span></"+u+">",c?'<span class="cancel-icon">&times;</span>':'<span class="cancel-text">CANCEL</span>','<input type="hidden" name="gift_code" value="'+m+'">'].join("");h.val(""),e.modal("hide"),v.append(u),f.hide().after(v),r.val(m),c?(g("[data-gift-card-open-popup-btn]").parent().addClass(b),g("[data-promo-code-open-popup-btn]").parent().addClass("col-12").removeClass("col-6")):g("[data-gift-card-open-popup-btn]").addClass(b).removeClass("d-inline-block"),f.hasClass("d-inline-block")&&f.removeClass("d-inline-block").addClass(b),void 0!==t.planPriceP&&t.planPriceP&&g("[data-ns-plan-item]:checked").parent("label").find("[data-ns-plan-item-price]").html("$"+t.planPriceP),p?void 0!==t.noccrequired&&t.noccrequired&&(a.noCcRequired=!0,s.val(t.plan_code),o.html(t.plan_data.name?"<h5>  <span>SUBSCRIPTION: </span>  "+t.plan_data.name+"</h5>":"").removeClass(b).css("display","block"),i.addClass(b),n.find(".validate-error").hide(),l.addClass(b)):g("[data-onboarding-subscribe]").trigger("applied-code",t),v.find("span").bind("click",function(){v.remove(),f.show(),r.val(""),void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow?(f.removeClass(b).addClass("d-inline-block"),g("[data-gift-card-open-popup-btn]").parent().removeClass(b),g("[data-promo-code-open-popup-btn]").parent().addClass("col-6").removeClass("col-12")):(g("[data-promo-code-open-popup-btn]").removeClass(b).addClass("d-inline-block"),g("[data-gift-card-open-popup-btn]").removeClass(b).addClass("d-inline-block")),p?a.noCcRequired&&(a.noCcRequired=!1,s.val(n.find('input[name="original_plan_code"]').val()),o.addClass(b).css("display","none"),n.find(".validate-error").hide(),i.removeClass(b),i.find("label.error").hide(),i.find("input[type=text]").val("").removeClass("error"),i.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),l.removeClass(b),d.prop("checked",!1).triggerHandler("click")):g("[data-onboarding-subscribe]").trigger("cancel-code")})},callAjax:function(e){var t=g(e),e=t.serializeArray(),n=t.find('button[type="submit"]'),a=t.find(".general-error");n.prop("disabled",!0),g.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:this.options.method,data:e,cache:!1,loader:!0}).done(function(e){e.success?g(".modal").modal("hide"):(a.remove(),t.append('<label class="general-error text-danger">'+e.data.message+"</label>")),n.prop("disabled",!1)}).fail(function(e,t,a){n.prop("disabled",!1)})},handleCouponCode:function(t){var e=g(t).serializeArray();g(t).find(".text-danger").remove(),g.ajax({type:this.options.method,url:this.options.url,data:e,cache:!1,success:function(e){e.success&&(g("#couponCode").modal("hide"),g("#couponCode").trigger("coupon-code-apply",e))},error:function(e){console.log(e);e='<label class="text-danger">'+e.statusText+"</label>";g(t).append(e)}})},handleUpdatePassword:function(e){var t=g(e),e=t.serializeArray(),n=t.find('button[type="submit"]'),a=t.find(".general-error");a.html(""),n.prop("disabled",!0),g.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:this.options.method,data:e,cache:!1,loader:!0}).done(function(e){e.success?(g(".modal").modal("hide"),s.location.reload()):a.html(e.data.message).show(),n.prop("disabled",!1)}).fail(function(e,t,a){n.prop("disabled",!1)})},destroy:function(){g.removeData(this.element[0],n)}},g.fn[n]=function(t,a){return this.each(function(){var e=g.data(this,n);e?e[t]&&e[t](a):g.data(this,n,new p(this,t))})},g.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},g(function(){g("[data-"+n+"]")[n]()})}(jQuery,window),function(n,i){"use strict";var s,o="global-search",f="d-none",l=0,v=0,g=!1,d=!1;function r(e,t){this.element=n(e),this.options=n.extend({},n.fn[o].defaults,this.element.data(),t),this.searchKey=void 0!==this.options.searchKey?this.options.searchKey:null,this.options.allowedSearch&&this.init()}r.prototype={init:function(){var a=this;a.$searchNotFound=a.element.find(".search-not-found"),a.$ondemandSearchResultWrapper=a.element.find("[data-ondemand-global-search]"),a.$ondemandSearchResultCount=a.$ondemandSearchResultWrapper.find("[data-ondemand-search-count]"),a.$ondemandSearchResults=a.$ondemandSearchResultWrapper.find("[data-ondemand-search-results]"),a.$liveSearchResultWrapper=a.element.find("[data-live-global-search]"),a.$liveSearchResultCount=a.$liveSearchResultWrapper.find("[data-live-search-count]"),a.$liveSearchResults=a.$liveSearchResultWrapper.find("[data-live-search-results]"),null!==a.searchKey?(a.getOnDemandVideos(1,function(e,t){a.renderOnDemandVideos(e,t),n(i).on("scrolled",function(){a.initWaypoints()})},!1),a.getLivestreamClasses(function(e){a.renderLiveClasses(e)})):a.$searchNotFound.removeClass(f)},getOnDemandVideos:function(t,a,e){this.destroyWaypoints(),n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:this.options.videoAction,keyword:this.searchKey,page:t,videosPerPage:12,formCheck:this.options.videoNonce},loader:e}).done(function(e){g=!0,e&&e.success&&(v=e.data.total,"function"==typeof a&&a(t,e.data.ondemandVideos))}).fail(function(e,t,a){})},getLivestreamClasses:function(t){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:this.options.liveAction,keyword:this.searchKey,formCheck:this.options.liveNonce},loader:!0}).done(function(e){d=!0,e&&e.success&&(l=e.data.total,"function"==typeof t&&t(e.data.liveClasses))}).fail(function(e,t,a){})},renderOnDemandVideos:function(t,e){var a=this,n=12*t;g&&d&&v<1&&l<1?a.$searchNotFound.removeClass(f):0<v&&(a.$ondemandSearchResultWrapper.removeClass(f),a.$ondemandSearchResultCount.html(v+" results"),1<t?a.$ondemandSearchResults.append(e):a.$ondemandSearchResults.html(e),n<v?s=new Waypoint({element:a.$ondemandSearchResults,handler:function(e){"down"===e&&a.getOnDemandVideos(t+1,function(e,t){a.renderOnDemandVideos(e,t)},!0)},enabled:!1,offset:"bottom-in-view"}):a.destroyWaypoints())},renderLiveClasses:function(e){g&&d&&v<1&&l<1?this.$searchNotFound.removeClass(f):0<l&&this.prepareLiveClassData(e)},prepareLiveClassData:function(e){for(var t=this,a=void 0!==e&&e?e:[],n=a.length,i=moment.tz.guess(),s=moment(),o=moment().add(1,"day"),l=s.unix(),d=[],r=0;r<n;r++){var c=a[r],h=c.endTimeZonedStamp,m=!c.isCanceled&&l<h,u=c.startTimeZonedStamp-l,p=s.isSame(moment(c.startTimeZonedStamp,"X"),"day"),h=o.isSame(moment(c.startTimeZonedStamp,"X"),"day");m&&m&&(c.diffInSeconds=u,c.enableCtaBtn=!1,c.showComingSoon=!1,void 0!==c.startDateTimeZoned&&(m=moment(c.startDateTimeZoned),c.dayOfWeek=m.tz(i).format("dddd"),c.startTime=m.tz(i).format("h:mm").replace(":00",""),c.startMeridien=m.tz(i).format("a"),c.locationTimeZone=m.tz(i).format("z"),p?c.dayOfWeek="Today":h&&(c.dayOfWeek="Tomorrow"),u<=t.options.timeAccess?(c.startMeridien="min",0<(h=Math.floor(u/60))?(c.dayOfWeek="Starts In",c.startTime=h):(c.dayOfWeek="Ends In",c.startTime=c.duration+h),c.enableCtaBtn=!0):u<=t.options.timeComingSoon&&(c.showComingSoon=!0)),d.push(c))}0<d.length?(t.$liveSearchResultWrapper.removeClass(f),t.$liveSearchResultCount.html(d.length+" results"),t.$liveSearchResults.html(t.renderSlickItems(d)),setTimeout(function(){t.initSlick()},500)):g&&v<1&&t.$searchNotFound.removeClass(f)},renderSlickItems:function(e){var r=this,c="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=e.level?"<span>"+e.level+"</span>":"",n=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,i=" avoid-click",s='<a href="#"'+r.prepareCtaBtnAttrs(e)+">"+r.options.ctaLiveText+"</a>",o='<a href="'+r.options.ctaUpgradeUrl+'">'+r.options.ctaUpgradeText+"</a>",l="",d=" no-cta";e.enableCtaBtn&&(i=" clickable",l=r.options.allowedAccess?s:o,d=""),e.showComingSoon&&(l="<span>"+r.options.comingSoonText+"</span>",d=" coming-soon"),c+='<div class="col-md-4">  <div class="live-content-item'+i+'" data-target="'+t+'">    <div class="live-content-item__info">      <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>      <div class="live-content-item__description">        <h5>'+e.title+'</h5>        <p class="context-1">'+n+'</p>        <p class="context-1">'+a+"<span>"+e.duration+' min</span></p>        <p class="live-content-item__description-watch'+d+'">'+l+'</p>      </div>    </div>    <div class="live-content-item__schedule">      <p class="context-3">'+e.dayOfWeek+'</p>      <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>      <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p>    </div>  </div>  <div class="search-cta-result d-none"></div></div>'}),c},prepareCtaBtnAttrs:function(e){var t=parseInt(e.duration),t=isNaN(t)?-1800:-60*t,t=parseInt(e.startTimeZonedStamp)-t;return' data-btn-livestream-join data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+o+'"'},initSlick:function(){var e=this.$liveSearchResults,t=this.$liveSearchResultWrapper.find(".slider-control .slider-nav");l<=3||e.slick({slidesToShow:3,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:t,appendDots:t,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{dots:!1,arrows:!1,slidesToShow:1,centerMode:!0,centerPadding:"20%"}}]})},initWaypoints:function(){s&&s.enable()},destroyWaypoints:function(){s&&s.destroy()},renderErrorMessage:function(e){var t=e.message;n('[data-target="item-'+e.itemId+'"]').parent().find(".search-cta-result").html(t).toggleClass(f,void 0===t||""===t)},destroy:function(){n.removeData(this.element[0],o)}},n.fn[o]=function(t,a){return this.each(function(){var e=n.data(this,o);e?e[t]&&e[t](a):n.data(this,o,new r(this,t))})},n.fn[o].defaults={ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",timeAccess:300,timeComingSoon:7200,allowedAccess:0,allowedSearch:1},n(function(){n("[data-"+o+"]")[o]()})}(jQuery,window),function(n,e){"use strict";var i="imagecycle";n("body"),n(e);function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){function s(e,t){return Math.floor(Math.random()*(t-e+1))+e}var e,t,o,l=this,d=this.element.find("li").length;e=l.element.find("li:nth-child("+s(1,16)+")"),t=l.element.find("li:nth-child("+s(17,d)+")"),(o=function(e,t){var a,n=180,i=0;e.find("img").addClass("old"),t.find("img").addClass("new").appendTo(e),a=function(){--i,--n,e.find(".old").css("transform","rotateY("+i+"deg)"),e.find("img:not(.old)").css("transform","rotateY("+n+"deg)"),-90===i&&(e.find(".old").removeClass("old").appendTo(t),e.find(".new").removeClass("new")),0===n?(n=180,i=0,e=l.element.find("li:nth-child("+s(1,16)+")"),t=l.element.find("li:nth-child("+s(17,d)+")"),o(e,t)):setTimeout(a,10)},setTimeout(a,2e3)})(e,t)},destroy:function(){this.element.find("img").removeClass("new old").css("transform",""),n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,i){"use strict";var s="journey-series",e="click."+s;function o(e,t){this.element=n(e),this.options=n.extend({},n.fn[s].defaults,this.element.data(),t),this.init()}o.prototype={init:function(){var t=this;n("[data-journey-series-video-item]").off(e).on(e,function(e){e.preventDefault();e=n(this);t.getFeaturedVideo(e.data("video-id"),e.data("leg-id"))}),n(".js-item-day-number").off(e).on(e,function(){var e=n(this);t.updateDayWatched(e.data("js-id"),e.data("js-day-watched"),e.data("form-check"))})},getFeaturedVideo:function(e,a){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:"yah_js_get_video",videoId:e,formCheck:this.options.formCheck},loader:!0}).done(function(e){var t;e.success&&((t=n("[data-journey-series-featured-video]")).html(e.data.html),n(i).trigger("scrollmagic:change"),n("[data-toggle-action]")["toggle-action"]("init"),n.fn.handleActionOnDemand(),YahVideoPlayer.previewLength=e.data.previewLength,YahVideoPlayer.isVideoFree=e.data.isVideoFree,YahVideoPlayer.videoEnable=e.data.videoEnable,YahVideoPlayer.activityNonce=e.data.activityNonce,YahVideoPlayer.journeySeriesDayData=a+"_"+e.data.videoId,YahVideoPlayer.initializePlayer(e.data.videoId,e.data.videoCode,e.data.isVideoFree),n("html, body").animate({scrollTop:t.offset().top},1e3,"swing"))}).fail(function(e,t,a){})},updateDayWatched:function(e,t,a){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"yah_js_update_log",jsId:e,jsDayData:t,formCheck:a},loader:!0}).done(function(e){e.success&&n('[data-js-day-watched="'+t+'"]').toggleClass("watched")}).fail(function(e,t,a){})},destroy:function(){n.removeData(this.element[0],s)}},n.fn[s]=function(t,a){return this.each(function(){var e=n.data(this,s);e?e[t]&&e[t](a):n.data(this,s,new o(this,t))})},n.fn[s].defaults={},n(function(){n("[data-"+s+"]")[s]()})}(jQuery,window),function(o){o(document).ready(function(){function e(){o("#signin-btn").toggleClass("selected"),o("html, body").animate({scrollTop:o("body").offset().top},300,"easeInOutQuad"),i.hasClass("open-panel")?(o("#search-btn").toggleClass("selected"),i.slideToggle(150,"easeInOutQuad",function(){s.slideToggle(a,"easeInOutQuad",function(){o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")}).toggleClass("open-panel")):s.slideToggle(a,"easeInOutQuad",function(){o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")}function t(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var a="300",n=o(".signin-wrapper .form-container"),i=o(".search-wrapper"),s=o(".signin-wrapper");"account-settings"!==t("dl")&&"account-subscription"!==t("dl")||e(),o(".signin-trigger").on("click",function(){return e(),!1}),o(".form-toggle").on("click",function(){return n.toggleClass("active-form"),n.toggle(),!1}),o(".search-trigger").on("click",function(){return o("#search-btn").toggleClass("selected"),s.hasClass("open-panel")?(o("#signin-btn").toggleClass("selected"),s.slideToggle(a,"easeInOutQuad",function(){i.slideToggle(150,"easeInOutQuad").toggleClass("open-panel"),o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")):i.slideToggle(150,"easeInOutQuad").toggleClass("open-panel"),!1}),o(".signin-wrapper .cancel-link").click(function(){o(".signin-wrapper form").each(function(){o("input",this).removeClass("error"),o("label.error",this).css("display","none"),this.reset()})}),o("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(e){e.preventDefault(),e.stopPropagation(),o(this).parent().hasClass("open")?o(this).parent().removeClass("open"):(o(this).parent().siblings().removeClass("open"),o(this).parent().addClass("open"));var t=o(this).parent().find("ul"),e=0,e=t.offset().left+t.width()+30>o(window).width()?-t.width():o(this).parent().width();t.css({left:e})});o("#signup-content").css("background-color","rgba(48, 55, 56, 0.65)"),o("#intro-video-outer").css("background-color","rgba(48, 55, 56, 0.65)"),o("[data-utc-date]").each(function(){var e=o(this).data("utc-date"),e=new Date(e);o(this).html(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear())}),o("[data-utc-date-2]").each(function(){var e=o(this).data("utc-date-2"),e=new Date(e);o(this).html(e.getMonth()+1+"/"+e.getDate())})})}(jQuery),function(_,b){"use strict";var i,n="live-schedule",s="records-list",P=_(document),f="MM-DD-YYYY",v="active",o={teacher:"teacherName",class:"title",level:"level"},I=!0;function D(){return 1200<=_(b).innerWidth()}function g(e,a,n){return-1<e.findIndex(function(e,t){if(e[o[n]].trim().toLowerCase()===a.trim().toLowerCase())return!0})}function l(e,t){this.liveClasses=[],this.liveFilterData=[],this.liveBgImages=[],this.dayActiveData=[],this.element=_(e),this.options=_.extend({},_.fn[t.pluginName].defaults,this.element.data(),t),this.click="click."+this.options.pluginName,this.documentClick="document-click."+this.options.pluginName,this.isShowFilter=this.element.find("[data-filter-search]").length,this.$btnControl=this.element.find("[data-filter-control]"),this.$btnSelectAll=this.element.find("[data-select-all]"),this.$searchInput=this.element.find("[data-search-input]"),this.allowedAccess=this.options.allowedAccess||!1,this.allowedNewTemplate=this.options.allowedNewTemplate||!1,this.isPromoPage=this.options.promoPage||!1,this.init()}l.prototype={init:function(){var n=this;"livepage"===n.options.pagetype&&n.getLiveClasses(function(){n.aditionalHeaderForFilterWidget.init(n),n.initSchedule()}),n.options.useParallax&&_(b).on("resized",function(){D()?n.renderScrollbar():n.destroyScrollbar()}),P.on("click",".live-content-item",function(e){var t=n.element.find(this).find(".addtocalendar");t.hasClass(v)||t.hasClass("added")}),P.off(this.documentClick).on(this.documentClick,function(e,t){n.clickOuside(t,n.element.find(".addtocalendar.active"))}),this.element.off(this.click,".atcb-item").on(this.click,".atcb-item",function(e){var t=_(this),a=t.closest(".addtocalendar"),n=a.find(".atcb-link"),i='<div class="atcb-checkmark"></div>',s=a.data().classId,o=a.data().classScheduleId,l=moment(a.data().endTimestamp,"X").toDate(),d=[];t.find(".atcb-checkmark").length||t.prepend(i),a.removeClass(v).addClass("added"),n.html(i+"ADDED"),a.find(".atcb-item .atcb-checkmark").each(function(){var e=_(this).siblings(".atcb-item-link");d.push(e.text())}),_.cookie("addtocalendar_"+s+o,d,{expires:l,path:"/"})}),this.element.off(this.click,".atcb-link").on(this.click,".atcb-link",function(e){var t=_(this);n.element.find(".addtocalendar").removeClass(v),t.parent().addClass(v)}),this.$btnControl.off(this.click).on(this.click,function(){var e=_(this),t=n.element.find("[data-select-day]").filter(".active").last(),a=parseInt(e.data("filter-control")),e=t.prev();a&&(e=t.next()),e.length&&(e.trigger("click"),t.trigger("click"))}),this.$btnSelectAll.off(this.click).on(this.click,function(){n.element.find("[data-select-day]").addClass(v),n.showHideControl(),n.renderSchedule(),n.handleSetHash()}),this.element.on(this.click,".live-content-item__content",function(e){1200<=_(b).innerWidth()||(e.stopPropagation(),_(this).closest(".live-content-item__content").toggleClass(n.options.classViewDescription))}),_(b).on("resized",function(){n.checkInitTextOverflow()}).on("scrolled",function(){i&&i.enable()})},checkInitTextOverflow:function(){var i=this,e=_(b).innerWidth()<1200,t=!e,a=this.element.find(".live-content-item__content");e||a.removeClass(this.options.classViewDescription),a.each(function(){var e=_(this),t=e.find(".view-more"),a=e.find(".description-paragraph"),n=e.data("line-clamp");a.find("span").length&&a.text(a.find("span").text()),n=a.height()<=n*i.options.heightTextTablet,t.toggleClass("d-none",n),e.data("not-init-clamp",n)}),this.element.data("not-init-text-overflow",t),_(b).trigger("hero:ready",[this.element])},clickOuside:function(e,t){var a,n=e.target;!(a=t).is(n)&&0===a.has(n).length&&a.hasClass(v)&&t.removeClass(v)},showHideControl:function(){var e=this.element.find("[data-select-day]").filter(".active"),t=e.last();if(this.element.find("[data-select-all]").toggleClass("hidden",1!=e.length),1==e.length)return this.element.find('[data-filter-control="0"]').toggleClass("hidden",!t.prev().length),void this.element.find('[data-filter-control="1"]').toggleClass("hidden",!t.next().length);this.element.find('[data-filter-control="0"]').addClass("hidden"),this.element.find('[data-filter-control="1"]').addClass("hidden")},initSchedule:function(){var t=this;t.element.find(".schedule-header").removeClass("d-none"),P.on(t.click,t.options.scheduleEventItem,function(e){_(e.target).is("a")||(e.preventDefault(),t.activeEventDetailBlock(_(this)))}),t.isShowFilter&&(t.searchTagList=[],t.element.find(".search-wrapper").removeClass("d-none"),t.element.find(".filter-date-wrapper").removeClass("d-none"),t.renderDateFilter(),t.renderTagFilter(),t.handleHashFilter(),t.element.find("[data-select-day]").off(t.click).on(t.click,function(){var e=t.element.find("[data-select-day].active");if(7==e.length&&e.removeClass(v),_(this).toggleClass("active",!_(this).hasClass("active")),t.showHideControl(),!t.element.find("[data-select-day].active").length)return t.renderErrorBlock(t.options.msgFilterDay),void t.destroyWaypoint();t.renderSchedule(),t.handleSetHash()})),this.renderSchedule()},initRecords:function(){var e=this;e.isShowFilter&&(e.searchTagList=[],e.element.find(".search-wrapper").removeClass("d-none"),e.renderTagFilter(),e.handleHashFilter()),this.renderRecordsList()},handleHashFilter:function(){var e=_.fn.getHashValue(),t=e.date,a=e.tname,n=e.cname,i=e.level,s=[],o=[],l=this,e=function(e,a){var n;switch(a){case"class":n="Class Name";break;case"teacher":n="Teacher";break;case"level":n="Level"}e&&e.length&&e.split(",").forEach(function(e,t){e=e.replace(/-(?![0-9])/g," ").replace(/-/," ");g(l.liveClasses,e,a)&&(s.push({label:e,category:n}),o.push(e))})};if(t&&t.length){var d=[],r=[],c=l.element.find("[data-select-day]");t.split(",").forEach(function(e,t){var a=moment(e,f),e=moment(a).format("dddd");d.push(a),r.push(e)}),c.removeClass(v);for(var h=0;h<c.length;h++){var m=_(c[h]),u=m.data().selectDay,p=m.attr("title"),u=moment(u,"X");-1!==_.inArray(p,r)&&function(e,t){return e.some(function(e){return e.isSame(t,"days")})}(d,u)&&m.addClass(v)}this.showHideControl()}e(n,"class"),e(a,"teacher"),e(i,"level"),this.searchTagList=s,this.$searchInput.importTags(o.join()),(void 0===t||t&&!t.length)&&this.handleSetHash()},handleSetHash:function(){var e=this.element.find("[data-select-day].active"),t=[],a=Object.keys({tname:"",cname:"",level:"",date:""}),n=[],i={},s=[],o=[],l=[];this.searchTagList.forEach(function(e,t){var a=e.label.trim().replace(/ /g,"-").toLowerCase();switch(e.category){case"Teacher":s.push(a);break;case"Class Name":o.push(a);break;case"Level":l.push(a)}}),e.each(function(){var e=_(this).data().selectDay,e=moment(e,"X").format("lll"),e=moment(new Date(e)).format(f);t.push(e)}),i.tname=s,i.cname=o,i.level=l,i.date=t,(a=a.filter(function(e){return i[e].length})).forEach(function(e,t){n.push(a[t]+"="+i[e])}),I||(b.location.hash=n.join("&"))},getLiveClasses:function(e){this.liveClasses=LIVE_SCHEDULE_FROM_PAGE.liveClasses,this.liveFilterData=LIVE_SCHEDULE_FROM_PAGE.liveFilterData,this.liveBgImages=LIVE_SCHEDULE_FROM_PAGE.bgImages,e()},getRecordsClasses:function(e){var t,a,n,i=this.getBrightcoveToken();t=middlewareGetBrightcoveVideos,i={token:i},a=e,n=this,_.ajax({url:t,data:i,crossDomain:!0,type:"POST",success:function(e){n.liveClasses=e.data.liveClasses,n.liveFilterData=e.data.liveFilterData,n.liveBgImages=e.data.bgImages,a(e)},error:function(e){console.log("error:"),console.log(e)}})},getBrightcoveToken:function(){return this.element.attr("data-token")},activeEventDetailBlock:function(e){var t=this.element.find(this.options.scheduleEventItem),a=this.element.find(".live-thumbnail-item"),n=e.attr("data-target"),n=this.element.find("#"+n);t.removeClass(this.options.scheduleEventActiveClass),a.removeClass(this.options.scheduleEventDetailActiveClass),e.addClass(this.options.scheduleEventActiveClass),n.addClass(this.options.scheduleEventDetailActiveClass),this.renderJoinButton(n)},renderJoinButton:function(e){var t=this.element.find(".bubble-join-wrap"),a=e.find(".bubble-join-wrap"),n=e.find("[data-btn-livestream-join]"),i=n.data("start-stamp"),s=n.data("duration"),e=parseInt(s),s=isNaN(e)?-1800:-60*e,e=parseInt(i)-s,s=parseInt(this.options.timeAccess);i-moment().unix()<=s&&(t.addClass("d-none"),a.removeClass("d-none"),this.allowedAccess?n.attr("data-end-stamp",e):n.attr("href",this.options.ctaUpgradeUrl).find("h5").text(this.options.ctaUpgradeText).removeAttr("data-btn-livestream-join"))},renderSchedule:function(){function o(e,a){var n=[];return _.each(e,function(e,t){t.category===a&&n.push(t.label.toLowerCase())}),n}var e=this.isShowFilter,t=e?this.element.find("[data-select-day].active"):null,a=e?this.searchTagList:null,n=P[this.options.pluginName].additionalSearchTagList,i=this.options.defaultFilterClasses,s=parseInt(this.options.timeAccess),l=parseInt(this.options.timeComingSoon),d=!!this.options.useEndDate,r=void 0!==this.liveClasses&&this.liveClasses?this.liveClasses:[],c=r.length,h=moment(),m=moment().add(1,"day"),u=h.unix(),p=e?function(e){var t=[];if(e.length)return e.each(function(){var e=_(this).attr("data-select-day");t.push(moment(e,"X"))}),t}(t):[h],f=u,v=moment.tz.guess(),g=[],b=0,y={duration:[],level:[],teacherName:[]};this.dayActiveData=[];for(var C=0;C<c;C++){var w=r[C],$=d?w.endTimeZonedStamp:w.startTimeZonedStamp,k=moment(w.startTimeZonedStamp,"X"),S=!e||function(e,i){return e.some(function(e){var t=moment(),a=t.unix(),n=e.isSame(i,"day"),t=e.isSame(t,"day");return n&&(f=t?a:e.startOf("day").unix()),n})}(p,k),x=!e||function(e,t){if(void 0===t||t.length<=0)return!0;var a=e.teacherName.toLowerCase(),n=e.title.toLowerCase(),i=e.level.toLowerCase(),s=o(t,"Teacher"),e=o(t,"Class Name"),t=o(t,"Level"),s=s.length<=0||0<s.length&&-1!==_.inArray(a,s),e=e.length<=0||0<e.length&&-1!==_.inArray(n,e),t=t.length<=0||0<t.length&&-1!==_.inArray(i,t);return s&&e&&t}(w,a),T=function(a,e){var n=!0;return void 0===e||e.length<=0||(_.each(e,function(e,t){a[t.category]!=t.value&&(n=!1)}),n)}(w,n),k=!w.isCanceled&&x&&T&&S&&f<$,x=w.startTimeZonedStamp-u,T=h.isSame(moment(w.startTimeZonedStamp,"X"),"day"),$=m.isSame(moment(w.startTimeZonedStamp,"X"),"day");if(S&&this.dayActiveData.push(w),!e&&i<=b)break;k&&(w.diffInSeconds=x,w.enableCtaBtn=!1,w.showComingSoon=!1,void 0!==w.startDateTimeZoned&&(k=moment(w.startDateTimeZoned),w.dayOfWeek=k.tz(v).format("dddd"),w.startTime=k.tz(v).format("h:mm").replace(":00",""),w.startMeridien=k.tz(v).format("a"),w.locationTimeZone=k.tz(v).format("z"),this.isPromoPage&&(w.startTime=k.tz(v).format("hh:mm"),w.startMeridien=k.tz(v).format("A"),k=k.add(w.duration,"minutes"),w.endTime=k.tz(v).format("hh:mm"),w.endMeridien=k.tz(v).format("A")),T?w.dayOfWeek="Today":$&&(w.dayOfWeek="Tomorrow"),x<=s?(this.isPromoPage||(w.startMeridien="min",0<($=Math.floor(x/60))?(w.dayOfWeek="Starts In",w.startTime=$):(w.dayOfWeek="Ends In",w.startTime=w.duration+$)),w.enableCtaBtn=!0):x<=l&&(w.showComingSoon=!0)),g.push(w),y.duration.push(w.duration),y.level.push(w.level),y.teacherName.push(w.teacherName),b++)}this.rerenderTopFilterSelects(y),I=!1,this.destroyScrollbar(),this.renderClasses(g,1),D()&&this.options.useParallax&&this.renderScrollbar(),this.element.find(this.options.scheduleEventItem).first().trigger("click")},renderRecordsList:function(){function o(e,a){var n=[];return _.each(e,function(e,t){t.category===a&&n.push(t.label.toLowerCase())}),n}var e=this.isShowFilter,t=(e&&this.element.find("[data-select-day].active"),e?this.searchTagList:null),a=P[this.options.pluginName].additionalSearchTagList,n=this.options.defaultFilterClasses,i=(parseInt(this.options.timeAccess),parseInt(this.options.timeComingSoon),this.options.useEndDate,void 0!==this.liveClasses&&this.liveClasses?this.liveClasses:[]),s=i.length,l=moment(),d=moment().add(1,"day"),r=moment.tz.guess(),c=[],h=0,m={duration:[],level:[],teacherName:[]};this.dayActiveData=[];for(var u=0;u<s;u++){var p=i[u],f=(moment(p.startTimeZonedStamp,"X"),!e||function(e,t){if(void 0===t||t.length<=0)return!0;var a=e.teacherName.toLowerCase(),n=e.title.toLowerCase(),i=e.level.toLowerCase(),s=o(t,"Teacher"),e=o(t,"Class Name"),t=o(t,"Level"),s=s.length<=0||0<s.length&&-1!==_.inArray(a,s),e=e.length<=0||0<e.length&&-1!==_.inArray(n,e),t=t.length<=0||0<t.length&&-1!==_.inArray(i,t);return s&&e&&t}(p,t)),v=function(a,e){var n=!0;return void 0===e||e.length<=0||(_.each(e,function(e,t){a[t.category]!=t.value&&(n=!1)}),n)}(p,a),g=!p.isCanceled&&f&&v,f=l.isSame(moment(p.startTimeZonedStamp,"X"),"day"),v=d.isSame(moment(p.startTimeZonedStamp,"X"),"day");if(this.dayActiveData.push(p),!e&&n<=h)break;g&&(p.enableCtaBtn=!1,p.showComingSoon=!1,void 0!==p.startDateTimeZoned&&(g=moment(p.startDateTimeZoned),p.dayOfWeek=g.tz(r).format("dddd"),p.startTime=g.tz(r).format("h:mm").replace(":00",""),p.startMeridien=g.tz(r).format("a"),p.locationTimeZone=g.tz(r).format("z"),f?p.dayOfWeek="Today":v&&(p.dayOfWeek="Tomorrow"),p.showComingSoon=!0),c.push(p),m.duration.push(p.duration),m.level.push(p.level),m.teacherName.push(p.teacherName),h++)}this.rerenderTopFilterSelects(m),I=!1,this.destroyScrollbar(),this.renderRecords(c,1),D()&&this.options.useParallax&&this.renderScrollbar(),this.element.find(".schedule-header").removeClass("d-none"),this.element.find(".play-record").on("click",function(e){b.location=_(e.target).find("a").attr("href")}),this.element.find(this.options.scheduleEventItem).first().trigger("click")},uniqueArrEls:function(e){return e.filter(function(e,t,a){return t==a.indexOf(e)}).filter(Boolean)},rerenderTopFilterSelects:function(t){var s=this;Object.keys(t).forEach(function(a){t[a]=s.uniqueArrEls(t[a]).sort();var e=s.element.find(".filter-demand-item[data-group-name='"+a+"']").find(".dropdown-menu"),n="",i="duration"==a?" mins":"";_.each(t[a],function(e,t){n+='<div class="dropdown-item" data-category="'+a+'" data-label="'+t+i+'" data-value="'+t+'">'+t+i+"</div>"}),e.html(n)}),this.aditionalHeaderForFilterWidget.handleEvent()},renderClasses:function(e,t){var a,n=this,i=this.element.find(".live-content-wrap"),s=this.element.find(".live-thumbnail-wrap"),o=this.options.limitScroll,l=this.options.classesPerPage||20,d=this.options.defaultFilterClasses||5,l=this.isShowFilter?l:d,r=e.slice((t-1)*l,t*l);this.destroyWaypoint(),n.options.useParallax?(a=n.renderClassesV1(r),1==t?(i.html(a.htmlSchedule),s.html(a.htmlClassDetail)):(i.append(a.htmlSchedule),s.append(a.htmlClassDetail)),s=1==t,D()&&this.renderScrollbar(s),n.element.find(".live-content-item").length<e.length&&this.renderWaypoint(n.element.find(".live-content-item:last-child"),function(){n.destroyScrollbar(),n.renderClasses(e,t+1)},n.element.find(".live-content-wrap"))):(n.element.find(".live-content-item").length<e.length&&(!o||1<o&&t<o)&&this.renderWaypoint(n.element.find(".live-content-wrap"),function(){n.renderClasses(e,t+1)}),a=n.renderClassesV2(r),1==t?i.html(a):i.append(a),n.checkInitTextOverflow()),n.options.ctaLink&&n.options.ctaText&&1==t&&(n.isShowFilter?(a=n.element.find("[data-view-schedule-cta]")).length&&(a.prev().remove(),a.remove()):i.append('<div class="line-separator"></div><div class="live-content-item" data-view-schedule-cta>  <a href="'+n.options.ctaLink+'"      class="heading-small-section link-hover-effect">'+n.options.ctaText+"</a></div>")),setTimeout(function(){n.element.find(".atcb-list").remove(),addtocalendar.load(),n.element.find(".addtocalendar a.atcb-item-link").each(function(e,t){_(t).attr("title","Add to "+_(t).text()),_(t).addClass("stretched-link")}),n.element.find(".addtocalendar.added").each(function(){var e=_(this),t=e.data(),e=e.find(".atcb-item-link"),n=_.cookie("addtocalendar_"+t.classId+t.classScheduleId).split(",");_.each(e,function(e,t){var a=_(t).text();-1!==_.inArray(a,n)&&_(t).before('<div class="atcb-checkmark"></div>')})})},500)},renderRecords:function(e,t){var a=this.element.find(".live-content-wrap"),n=(this.element.find(".live-thumbnail-wrap"),this.options.limitScroll,e.slice(20*(t-1),20*t));this.destroyWaypoint(),n=this.buildRecordHtml(n),1==t?a.html(n):a.append(n),this.checkInitTextOverflow()},prepareCtaBtnAttrs:function(e){var t=parseInt(e.duration),t=isNaN(t)?-1800:-60*t,t=parseInt(e.startTimeZonedStamp)-t;return this.isHasZoomTag(e)?'data-zoom="true" data-btn-livestream-join data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+this.options.pluginName+'"':'data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+this.options.pluginName+'"'},isHasZoomTag:function(e){var t=!1;if(void 0!==e.tags)for(var a=0;a<e.tags.length;a++)if(e.tags[a].slug==ZOOM_TAG){t=!0;break}return t},renderClassesV1:function(e){var h=this,t={},m="",u="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=1===e.isNewClass?" content-new":"",n=e.level?"<span>"+e.level+"</span>":"",i=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,s=h.liveBgImages[Math.floor(Math.random()*h.liveBgImages.length)],o=e.enableCtaBtn?"":" d-none",l=h.prepareCtaBtnAttrs(e),d='<a href="#"'+l+">"+h.options.ctaJoinText+"</a>",r='<a href="'+h.options.ctaUpgradeUrl+'">'+h.options.ctaUpgradeText+"</a>",c="";e.enableCtaBtn&&(h.allowedAccess?c=d:(c=r,l="")),m+='<div class="line-separator"></div><div class="live-content-item'+a+' row no-gutters" data-target="'+t+'" data-live-item> <div class="live-content-item__info">   <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>   <div class="live-content-item__description">     <h5>'+e.title+'</h5>     <p class="context-1"><span>'+i+"</span>"+n+'</p>     <p class="live-content-item__description-watch link-hover-effect">'+c+'</p>   </div> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>   <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p> </div> <div class="col-12 schedule-cta-result d-none"></div></div>',u+=' <div id="'+t+'" class="live-thumbnail-item"       style="background-image: url('+s+');">   <div class="live-thumbnail__content">     <div class="live-thumbnail__content-title"><h5>'+e.title+'</h5></div>     <div class="live-thumbnail__content-description">       <p class="description-paragraph">'+e.desc+'</p>     </div>   </div>   <div class="bubble-wrap bubble-join-wrap zoom-effect'+o+'">     <div class="fuzzy-bubble"></div>     <div class="description-bubble">       <div class="description-bubble__content description-bubble__text">         <a href="#"'+l+'>           <h5 class="text-in-bubble text-white">'+c+"</h5>         </a>       </div>     </div>   </div> </div>"}),t.htmlSchedule=m,t.htmlClassDetail=u,t},renderClassesV2:function(e){var f=this,v=f.options.lineClamp||3,g="",b="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=e.level?"<span>"+e.level+"</span>":"",n=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,i=" avoid-click",s=f.prepareCtaBtnAttrs(e),o='<a href="'+f.options.ctaUpgradeUrl+'">'+f.options.ctaUpgradeText+"</a>",l="",d=" no-cta",r="",c="Add to Calendar",h="",m=""==e.desc?"d-none":"",u=f.isHasZoomTag(e),p="",p=u?'<a href="#"'+s+' data-zoom="true">'+f.options.ctaLiveText+"</a>":'<a target="_blank" href="/stream?room=room_'+e.classId+'"'+s+">"+f.options.ctaLiveText+"</a>";e.enableCtaBtn&&(i=" clickable",l=f.allowedAccess?p:o,d=""),e.showComingSoon&&(l='<a href="#">'+f.options.comingSoonText+"</a>",d=" coming-soon"),e.enableCtaBtn||(s=_.cookie("addtocalendar_"+e.classId+e.classSchedId),o=-1!==(p=f.options.livePlayerUrl).indexOf("?")?"&":"?",p=void 0!==p&&p?p+o+"id="+e.classId:"",s&&(h="added",c='<div class="atcb-checkmark"></div>ADDED'),r='<span class="addtocalendar '+h+'" data-class-id="'+e.classId+'" data-class-schedule-id="'+e.classSchedId+'" data-end-timestamp="'+e.endTimeZonedStamp+'">  <button type="button" class="btn-transparent atcb-link">'+c+'</button>  <var class="atc_event">    <var class="atc_date_start">'+e.startDateTime+'</var>    <var class="atc_date_end">'+e.endDateTime+'</var>    <var class="atc_timezone">'+e.timeZone+'</var>    <var class="atc_title">'+e.title+'</var>    <var class="atc_location">'+e.location+'</var>    <var class="atc_organizer">'+e.staff+'</var>    <var class="atc_description">'+p+"</var>  </var></span>"),b=u?' <p class="live-content-item__description-watch'+d+'" data-zoom="true">'+l+"</p>":' <p  class="live-content-item__description-watch live-modal '+d+'"> <a href="#" >'+l+"</a> </p>",f.allowedNewTemplate?(d="")!=(d=e.showComingSoon||""==l?'<div class="live-class-item-btn-secondary">'+r+"</div>":'<div class="live-class-item-btn-primary">'+l+"</div>")&&(g+='<div class="live-class-item'+i+'" data-target="'+t+'"><div class="live-class-item-left"> <div class="live-class-item-left-wrapper">   <div class="live-class-item-time-wrapper">     <div class="live-class-item-time">'+e.startTime+"<span>"+e.startMeridien+'</span></div>     <div class="live-class-item-text">Starts</div>   </div>   <div class="live-class-item-time-wrapper last">     <div class="live-class-item-time">'+e.endTime+"<span>"+e.endMeridien+'</span></div>     <div class="live-class-item-text">Ends</div>   </div>   <div class="live-class-item-teacher">     <div class="live-class-item-teacher-avatar">       <img src="'+e.teacherImg+'" alt="Avatar">     </div>     <div class="live-class-item-teacher-info">       <div class="live-class-item-style">         <span>'+e.title+'</span>         <img src="'+LIVESTREAM_IMAGE_BASE_URL+'exclamation-mark.svg" alt="">         <div class="live-class-item-description">                  '+e.desc+'         </div>       </div>       <div class="live-class-item-teacher-name">'+n+'</div>     </div>   </div> </div> <div class="live-class-item-info class-duration-level">   <div class="live-class-item-info-el">     <img src="'+LIVESTREAM_IMAGE_BASE_URL+'clock.svg" alt="Clock">     <span>'+e.duration+' min</span>   </div>   <div class="live-class-item-info-el">     <img src="'+LIVESTREAM_IMAGE_BASE_URL+'level.svg" alt="Level">     '+a+'   </div> </div></div><div class="live-class-item-right"> '+d+"</div></div>"):g+='<div class="line-separator"></div><div class="live-content-item'+i+'" data-target="'+t+'"> <div class="live-content-item__info">   <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>   <div class="live-content-item__description">     <h5>'+e.title+'</h5>     <p class="context-1">'+n+'</p>     <p class="context-1">'+a+"       <span>"+e.duration+' min</span>     </p>   </div> </div> <div class="live-content-item__content" data-text-overflow-clamp data-line-clamp="'+v+'">   <p class="description-paragraph">'+e.desc+'</p>   <button type="button" class="view-more '+m+'" data-view-description aria-label="See more description">     <span class="inner">       <span></span>       <span></span>     </span>   </button> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>   <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+"</p>   "+r+" </div>"+b+' <div class="col-12 schedule-cta-result d-none"></div></div>'}),g},buildRecordHtml:function(e){var c=this,h=c.options.lineClamp||3,m="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=e.level?"<span>"+e.level+"</span>":"",n=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,i=" avoid-click",s=c.prepareCtaBtnAttrs(e),o='<a href="'+c.options.ctaUpgradeUrl+'">'+c.options.ctaUpgradeText+"</a>",l="",d=" no-cta",r=""==e.desc?"d-none":"",s='<a href="#"'+s+' data-zoom="true">'+c.options.ctaLiveText+"</a>";e.enableCtaBtn&&(i=" clickable",l=c.allowedAccess?s:o,d=""),e.showComingSoon&&(l='<a href="#">'+c.options.comingSoonText+"</a>",d=" coming-soon"),m+='<div class="line-separator"></div><div class="live-content-item'+i+'" data-target="'+t+'"> <div class="live-content-item__info">   <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>   <div class="live-content-item__description">     <h5>'+e.title+'</h5>     <p class="context-1">'+n+'</p>     <p class="context-1">'+a+"       <span>"+e.duration+' min</span>     </p>   </div> </div> <div class="live-content-item__content" data-text-overflow-clamp data-line-clamp="'+h+'">   <p class="description-paragraph">'+e.desc+'</p>   <button type="button" class="view-more '+r+'" data-view-description aria-label="See more description">     <span class="inner">       <span></span>       <span></span>     </span>   </button> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>   <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p> </div><p class="live-content-item__description-watch play-record"><a href="/records/?video_id='+e.brightcoveId+'">Play</a></p> <div class="col-12 schedule-cta-result d-none"></div></div>'}),m},destroyScrollbar:function(){var e=this.element.find(".live-content-wrap").data("jsp");e&&e.destroy()},renderScrollbar:function(e){e=e||!1;this.isShowFilter&&this.element.find(".live-content-wrap").jScrollPane({autoReinitialise:e})},destroyWaypoint:function(){i&&i.destroy()},renderWaypoint:function(e,t,a){i=new Waypoint({element:e,handler:function(e){"down"===e&&"function"==typeof t&&t()},enabled:!1,offset:a?"100%":"bottom-in-view",context:a})},aditionalHeaderForFilterWidget:{init:function(e){this.plugun=e,P[this.plugun.options.pluginName]={},P[this.plugun.options.pluginName].additionalSearchTagList=[],this.grabFromLocalStorage(),this.renderTags(),this.handleEvent()},handleEvent:function(){var t=this,e="records-list"==this.plugun.options.pluginName?".records-tab":".live-tab ",a=this.plugun;_(e).length||(e=".live-schedule-block"),_(e).find(".dropdown-menu .dropdown-item").unbind("click").on("click",function(e){t.plugun=a,t.onAddTag(e,t)}),this.plugun.element.find(".additional-tags-box").unbind("click").on("click",".tag a",function(e){t.onRemoveTag(e,t)})},renderTags:function(){var a=this;_.each(P[this.plugun.options.pluginName].additionalSearchTagList,function(e,t){a.addOrUpdateTagHtml("add",t.category,t.value,t.label)})},updateLocalStorage:function(){P[this.plugun.options.pluginName].additionalSearchTagList;localStorage.setItem("searchStorage",JSON.stringify(P[this.plugun.options.pluginName].additionalSearchTagList))},grabFromLocalStorage:function(){localStorage.getItem("searchStorage")?P[this.plugun.options.pluginName].additionalSearchTagList=_.parseJSON(localStorage.getItem("searchStorage")):P[this.plugun.options.pluginName].additionalSearchTagList=[]},onAddTag:function(e,t){var a=_(e.target),n=a.attr("data-label"),i=a.attr("data-value"),e=a.attr("data-category"),a=t.addOrUpdateTagList(e,i,n);switch(t.addOrUpdateTagHtml(a,e,i,n),t.updateLocalStorage(),t.plugun.options.pagetype){case"livepage":t.plugun.renderSchedule();break;case"records":t.plugun.renderRecordsList()}},addOrUpdateTagHtml:function(e,t,a,n){var i='<span class="tag" data-label="'+n+'" data-value="'+a+'" data-category="'+t+'"><span>'+n+'</span><a href="#">✕</a></span>';switch(e){case"add":this.plugun.element.find(".additional-tags-box").append(i);break;case"update":t=this.plugun.element.find(".additional-tags-box").find(_('*[data-category="'+t+'"]')).first();t.attr("data-label",n),t.attr("data-value",a),t.find("span").html(n)}},addOrUpdateTagList:function(e,t,a){var n=this.getIndexByCategory(e);return-1<n?(P[this.plugun.options.pluginName].additionalSearchTagList[n].label=a,P[this.plugun.options.pluginName].additionalSearchTagList[n].value=t,"update"):(P[this.plugun.options.pluginName].additionalSearchTagList.push({label:a,value:t,category:e}),"add")},removeFromTagList:function(e){e=this.getIndexByCategory(e);P[this.plugun.options.pluginName].additionalSearchTagList.splice(e,1)},getIndexByCategory:function(t){return P[this.plugun.options.pluginName].additionalSearchTagList.findIndex(function(e){return e.category===t})},onRemoveTag:function(e,t){var a=_(e.target).closest(".tag"),e=(a.attr("data-label"),a.attr("data-category"));switch(t.removeFromTagList(e),t.updateLocalStorage(),a.remove(),t.plugun.options.pagetype){case"livepage":t.plugun.renderSchedule();break;case"records":t.plugun.renderRecordsList()}}},renderTagFilter:function(){_.widget("custom.autocomplete",_.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(n,e){var i=this,s="";_.each(e,function(e,t){var a;t.category!==s&&(n.append("<li class='ui-autocomplete-category'>"+t.category+"</li>"),s=t.category),a=i._renderItemData(n,t),t.category&&a.attr("aria-label",t.category+" : "+t.label)})}}),this.renderTagList()},renderTagList:function(){var n=this,a=n.options.filterLimitItems||4,i=this.options.pagetype,e="records"==i?".records-tab":".live-tab ";this.$searchInput.tagsInput({placeholder:n.options.tagsInputPlaceholder,limit:a,autocomplete:{appendTo:e+" .ui-autocomplete-wrapper",autoFocus:!0,delay:500,source:function(e,t){t(n.filterTags(n.getSourceTags(),e.term))},select:function(e,t){if(n.searchTagList.length<a&&!function(e,t,a){for(var n=0;n<e.length;n++)if(e[n].label===t&&e[n].category===a)return!0}(n.searchTagList,t.item.label,t.item.category))switch(n.searchTagList.push({label:t.item.label,category:t.item.category}),n.handleSetHash(),i){case"livepage":n.renderSchedule();break;case"records":n.renderRecordsList()}},open:function(e,t){_.fn.handleHeightAutoComplete(!0)}},onRemoveTag:function(e,t){var a=n.searchTagList.findIndex(function(e){return e.label===t});switch(n.searchTagList.splice(a,1),i){case"livepage":n.renderSchedule();break;case"records":n.renderRecordsList()}n.handleSetHash()}}),_(".ui-autocomplete-input").css("font-size","26px")},getSourceTags:function(){var i=[],s=this;return this.dayActiveData&&this.dayActiveData.length&&this.liveFilterData.forEach(function(e,t){var a,n=e.label;switch(e.category){case"Teacher":a="teacher";break;case"Class Name":a="class";break;case"Level":a="level"}g(s.dayActiveData,n,a)&&i.push(e)}),i},filterTags:function(e,t){var a=t.trim().toLowerCase();return e.filter(function(e){return 0<=e.label.trim().toLowerCase().indexOf(a)})},renderDateFilter:function(){for(var e=this.element.find(".filter-wrapper"),t="",a=0;a<=6;a++){var n=moment().add(a,"days"),i=n.format("X"),s=n.format("dddd"),o=s.slice(0,1),n=n.format("Do");0===a?n="Today":1===a&&(n="Tomorrow"),t+='<div class="filter-item active" title="'+s+'" data-select-day="'+i+'"> <div class="filter-content"><h5>'+o+'</h5></div> <div class="filter-description"><p>'+n+"</p></div></div>"}e.empty().append(t),this.showHideControl()},renderErrorMessage:function(e){var t=e.message;this.element.find('[data-target="item-'+e.itemId+'"] .schedule-cta-result').html(t).toggleClass("d-none",void 0===t||""===t)},renderErrorBlock:function(e){this.element.find(".filter-day-result").remove(),this.element.find(".live-content-wrap").html('<label class="text-danger filter-day-result">'+e+"</label>")},destroy:function(){_.removeData(this.element[0],this.options.pluginName)}},_.fn[n]=function(t,a){return this.each(function(){var e=_.data(this,n);e?e[t]&&e[t](a):_.data(this,n,new l(this,t))})},_.fn[s]=function(t,a){return this.each(function(){var e=_.data(this,s);e?e[t]&&e[t](a):_.data(this,s,new l(this,t))})},_.fn[n].defaults={pluginName:n,pagetype:"livepage",scheduleEventActiveClass:"item-active",scheduleEventDetailActiveClass:"thumbnail-active",scheduleEventItem:"[data-live-item]",classViewDescription:"opened-description",filterLimitItems:4,useParallax:0,lineClamp:3,useEndDate:0,classesPerPage:10,defaultFilterClasses:5,timeAccess:300,timeComingSoon:7200,tagsInputPlaceholder:"Start typing a teacher, level, or class name...",allowedAccess:!1,allowedNewTemplate:!1,ctaJoinText:"Join Now",ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",msgFilterDay:"No days selected",limitScroll:0,heightTextTablet:20},_.fn[s].defaults={pluginName:s,pagetype:"records",scheduleEventActiveClass:"item-active",scheduleEventDetailActiveClass:"thumbnail-active",scheduleEventItem:"[data-live-item]",classViewDescription:"opened-description",filterLimitItems:4,useParallax:0,lineClamp:3,useEndDate:0,classesPerPage:10,defaultFilterClasses:5,timeAccess:300,timeComingSoon:7200,tagsInputPlaceholder:"Start typing a teacher, or class name...",allowedAccess:!1,allowedNewTemplate:!1,ctaJoinText:"Join Now",ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",msgFilterDay:"No days selected",limitScroll:0,heightTextTablet:20,promoPage:!1},_(function(){_("[data-"+n+"]")[n]({pluginName:n}),_("[data-"+s+"]")[s]({pluginName:s})})}(jQuery,window),function(s,e){"use strict";var n="menu-header",t="click."+n,a="document-click."+n,o="active";function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.$doc=s(document),this.$btn=this.element.find("[data-menu-btn]"),this.$navList=this.element.find("[data-menu-list]"),this.$navbarAvatar=this.element.find("[data-navbar-avatar]"),this.$actionList=this.element.find("[data-action-list]"),this.$iconSearch=this.element.find(".global-search-icon"),this.$iconCloseSearch=this.element.find(".close-global-search")},handleEvent:function(){var i=this;this.$btn.off(t).on(t,function(){i.handleShowMenu()}),this.$navbarAvatar.off(t).on(t,function(e){e.preventDefault(),i.handleAction()}),s(e).on("breakpoint:change."+n,function(){i.hideMenu(),i.hideAction()}),this.$doc.off(a).on(a,function(e,t){i.clickOuside(t)}),this.$iconSearch.off(t).on(t,function(){var e=s(".header-main-mobile").is(":visible"),t=s(this).closest(".navbar").find(".overlay-search"),a=s("header"),n=a.height(),a=a.find(".sub-header"),a=void 0!==a&&a.length?a.height():0;e&&i.handleShowMenu(),t.css({height:n-a,top:a}).toggleClass(o)}),this.$iconCloseSearch.off(t).on(t,function(){s(this).parents(".overlay-search").toggleClass(o),s(this).siblings(".overlay-content").find("input").val("")})},clickOuside:function(e){var a=e.target,e=function(e,t){return!e.is(a)&&0===e.has(a).length&&e.hasClass(o)&&!t.is(a)&&0===t.has(a).length&&t.hasClass(o)};e(this.$navbarAvatar,this.$actionList)&&this.hideAction(),e(this.$btn,this.$navList)&&this.hideMenu()},handleShowMenu:function(){this.$btn.hasClass(o)?this.hideMenu():this.showMenu()},showMenu:function(){this.$btn.addClass(o),this.$navList.addClass(o)},hideMenu:function(){this.$btn.removeClass(o),this.$navList.removeClass(o)},handleAction:function(){this.$navbarAvatar.hasClass(o)?this.hideAction():this.showAction()},showAction:function(){this.$navbarAvatar.addClass(o),this.$actionList.addClass(o)},hideAction:function(){this.$navbarAvatar.removeClass(o),this.$actionList.removeClass(o)},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(){var n={};this.tmpl=function e(t,a){t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t]||e(document.getElementById(t).innerHTML);return a?t(a):t}}(),function(o){"use strict";var n="playlist-framework-modal",a="click."+n,e="input."+n,l="d-none",d=!1,r=null;function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){var e=this;e.$form=e.element.find("form.form"),e.$loading=e.element.find(".img-loading"),e.$modalErrorMessage=e.element.find(".general-error"),e.$newPlaylistNameInput=e.element.find("[data-input-new-playlist]"),e.$btnAddPlaylist=e.element.find("[data-btn-add-playlist]"),e.$btnUpdatePlaylist=e.element.find("[data-btn-update-playlist]"),e.selectedPlaylists="[data-radiobox]",e.currentModalId=null,e.$modalDeletePlaylist=o("[ data-playlist-delete-modal]"),e.modalDeletePlaylistId=e.$modalDeletePlaylist.attr("id"),e.$modalBtnDelete=e.$modalDeletePlaylist.find("[data-btn-accept]"),e.$modalDeleteMessage=e.$modalDeletePlaylist.find(".general-error"),e.$modalBtnDeleteCached=null,e.handleEvents()},handleEvents:function(){var t=this;t.element.on("show.bs.modal",function(){r=t.$btnUpdatePlaylist.data("video-id"),t.$modalErrorMessage.html(""),t.getAllPlaylistsEvent(function(e){t.renderUserPlaylist(e,!0)})}),t.$modalDeletePlaylist.on("hidden.bs.modal",function(){o("body").addClass("modal-open")}),t.$newPlaylistNameInput.off(e).on(e,function(){t.$modalErrorMessage.html(""),t.$btnAddPlaylist.toggleClass("d-none",!o(this).val().length)}),t.$newPlaylistNameInput.on("keypress",function(e){13===e.which&&(e.preventDefault(),t.$btnAddPlaylist.trigger(a))}),t.$btnAddPlaylist.off(a).on(a,function(){t.$modalErrorMessage.html(""),t.addPlaylistEvent(function(e){t.renderUserPlaylist(e,!1)})}),t.$btnUpdatePlaylist.off(a).on(a,function(e){e.preventDefault(),t.$modalErrorMessage.html(""),t.updatePlaylistEvent(o(this))}),t.element.on(a,"[data-btn-delete-playlist]",function(e){e.preventDefault(),t.$modalBtnDeleteCached=o(this),t.$modalErrorMessage.html(""),t.$modalDeleteMessage.html("").removeClass("mb-3")}),t.$modalBtnDelete.off(a).on(a,function(e){e.preventDefault(),t.$modalDeleteMessage.html("").removeClass("mb-3"),t.deletePlaylistEvent()})},getAllPlaylistsEvent:function(t){var a=this;a.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:"get_playlists",videoId:r,formCheck:this.$btnUpdatePlaylist.data("form-check")},loader:!0}).done(function(e){e&&e.success&&"function"==typeof t&&t(e.data),a.hideLoadingImg()}).fail(function(e,t,a){})},getSelectedPlaylists:function(){var a=[],e=o(this.selectedPlaylists).filter(":checked");return o.each(e,function(e,t){t=o(t).data("playlist-id");t&&a.push(t)}),a},updateVideoMenuContext:function(e){o("#playlist-action-menu-"+r).text((e?"Remove from":"Add to")+" Playlist")},addPlaylistEvent:function(t){var n=this,e=n.$newPlaylistNameInput;d||(d=!0,n.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),playlistName:e.val(),formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?"function"==typeof t&&t(e.data):n.$modalErrorMessage.html(e.data.message),d=!1,n.hideLoadingImg()}).fail(function(e,t,a){d=!1,n.hideLoadingImg(),n.$modalErrorMessage.html("Invalid request.")}))},updatePlaylistEvent:function(e){var n=this,t=n.getSelectedPlaylists();n.$btnUpdatePlaylist.prop("disabled",!0),d||(d=!0,n.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),videoId:r,playlistIds:t?t.join():null,formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.hideModal(),n.updateVideoMenuContext(e.data.inPlaylist)):n.$modalErrorMessage.html(e.data.message),d=!1,n.hideLoadingImg(),n.$btnUpdatePlaylist.prop("disabled",!1)}).fail(function(e,t,a){d=!1,n.hideLoadingImg(),n.$btnUpdatePlaylist.prop("disabled",!1),n.$modalErrorMessage.html("Invalid request.")}))},deletePlaylistEvent:function(){var n=this,i=n.$modalDeletePlaylist.find("form.form"),s=n.$modalDeletePlaylist.find(".img-loading"),t=n.$modalBtnDeleteCached,e=t.parents("form").find('[name="delete-nonce"]').val();n.$modalBtnDelete.prop("disabled",!0),d||(d=!0,i.addClass(l),s.removeClass(l),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.data("action"),playlistId:t.data("playlist-id"),videoId:r,formCheck:e},loader:!0}).done(function(e){e&&e.success?(n.$modalDeletePlaylist.modal("hide"),t.closest(".form-checkbox").remove(),n.updateVideoMenuContext(e.data.inPlaylist)):n.$modalDeleteMessage.html(e.data.message).addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),d=!1,i.removeClass(l),s.addClass(l)}).fail(function(e,t,a){n.$modalDeleteMessage.html("Invalid request.").addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),d=!1,i.removeClass(l),s.addClass(l)}))},renderUserPlaylist:function(e,t){var a=this.element.find(".playlist-wrapper"),n=e.playlistData,i="",s=!1;t&&a.empty();for(var o=0;o<n.length;o++){var l=n[o].playlistId,d=n[o].playlistName,r=n[o].inList;i+='<div class="form-checkbox">  <div class="form-group-wrap">    <div class="title-wrap">      <label for="playlist_name_'+l+'">        <input type="checkbox" name="playlist" id="playlist-item-'+l+'"'+(r?" checked ":"")+'               data-radiobox data-playlist-id="'+l+'">        <span class="radiomark"></span>        <span>'+d+'</span>      </label>      <div class="radio-detail">        <p data-btn-delete-playlist data-action="delete_playlist" data-playlist-id="'+l+'" data-toggle="modal" data-target="#'+this.modalDeletePlaylistId+'">Delete</p>      </div>    </div>  </div></div>',s=!!r}a.append(i),s||this.updateVideoMenuContext(!1),this.resetForm()},showModal:function(e){var t=this;t.currentModalId=e.modalId,o(t.currentModalId).modal("show"),o(t.currentModalId).on("hide.bs.modal",function(){t.resetForm()})},hideModal:function(){o(this.currentModalId).modal("hide")},showLoadingImg:function(){this.$loading.removeClass(l),this.$form.addClass(l)},hideLoadingImg:function(){this.$loading.addClass(l),this.$form.removeClass(l)},resetForm:function(){this.$newPlaylistNameInput.val(""),this.$btnAddPlaylist.addClass("d-none")},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(l,d){"use strict";var s,n="filter-demand",e="click."+n;function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$dropdownItem=this.element.find(".dropdown-item:not(.empty-line)"),this.$demandVideosList=l("[data-demand-videos-list]"),this.$filterListItems=l(".filter-demand-selections"),this.$boxFilter=l("[data-box-filter]"),this.hashPrefixLength=this.options.hashPrefix.length,this.allVideosHash=this.options.hash.substring(this.hashPrefixLength),this.itemsPerPage=this.options.itemsPerPage?parseInt(this.options.itemsPerPage):12,this.$boxFilter.addClass("box-filter"),this.renderFilterList(),this.handleFilterEvents()},renderFilterList:function(){var i=this,e=(d.location.hash.length<=0?i.options:d.location).hash,t=i.options.hash===e,e=e.substring(i.hashPrefixLength).split("/"),s=0;t?i.renderAllVideosFilter():(l.each(e,function(e,t){var a=l('.dropdown-item[data-filter-slug="'+t+'"]'),n=a.parents("[data-filter-group-items]");a.length&&(a.addClass("active"),i.renderFilterListItem(a.text(),t,n.attr("data-group-name")),s++)}),s<1&&(i.updateLocationHash(i.options.hash),i.renderFilterList()),i.getVideos(1))},renderFilterListItem:function(e,t,a){if(!this.$filterListItems.find('[data-filter-slug="'+t+'"]').length)return this.$filterListItems.append('<span class="filter-demand-label" data-filter-group="'+a+'"      data-filter-slug="'+t+'">  <span class="filter-demand-slug">'+e+'</span>  <span class="filter-demand-close" data-remove-filter-item>    <span class="icon-bar"></span>    <span class="icon-bar"></span>  </span></span>');l(d).trigger("scrollmagic:change")},handleFilterEvents:function(){var t,a,s=this;l("[data-filter-group-items]").on("show.bs.dropdown",function(){s.$boxFilter.css({overflow:"hidden"})}).on("shown.bs.dropdown",function(){var e=l(this).find(".dropdown-menu");void 0!==t&&a.destroy(),e.find('[class^="dropdown"]').wrapAll(l('<div class="scroll-panel"></div>').css({"max-height":e.css("max-height"),width:e.width()})),t=e.find(".scroll-panel").jScrollPane(),a=t.data("jsp")}).on("hidden.bs.dropdown",function(){s.$boxFilter.removeAttr("style");var e=l(this).find(".dropdown-menu").find(".dropdown-item");a.destroy(),t=void 0,e.unwrap()}),l(".dropdown-menu").on("click.bs.dropdown",function(e){e.stopPropagation()}),s.$dropdownItem.off(e).on(e,function(){var e=l(this),t=e.data("filter-slug"),a=e.closest("[data-filter-group-items]"),n=a.data("group-name"),i=s.$filterListItems.find('[data-filter-group="'+n+'"]');a.find(".dropdown-toggle").dropdown("toggle"),i.length?(n=i.attr("data-filter-slug"),n=d.location.hash.replace(n,t),a.find(".dropdown-item").removeClass("active"),i.attr("data-filter-slug",t),i.find(".filter-demand-slug").text(e.text()),s.updateLocationHash(n),s.renderFilterList()):s.updateHash(t,!0)}),s.$filterListItems.off(e).on(e,"[data-remove-filter-item]",function(){var e=l(this).parent(".filter-demand-label"),t=e.data("filter-group"),a=e.data("filter-slug");e.remove(),l('[data-group-name="'+t+'"]').find(".dropdown-item").removeClass("active"),s.updateHash(a,!1)}),l("[data-reset-filter]").off(e).on(e,function(){l("[data-filter-group-items] .dropdown-item").removeClass("active"),s.updateHash(s.allVideosHash,!1)})},renderAllVideosFilter:function(){this.$filterListItems.find(".filter-demand-label:not([data-reset-filter])").remove(),this.updateLocationHash(this.options.hash),this.renderFilterListItem("All Videos",this.allVideosHash,""),this.getVideos(1)},updateLocationHash:function(e){d.location.hash=e},updateHash:function(e,t){var a,n=this,i=d.location.hash,s=i.substring(n.hashPrefixLength).split("/"),o=l.inArray(e,s);if(e===n.allVideosHash)return n.updateLocationHash(n.options.hash),void n.renderFilterList();0<s.length&&(-1!==(a=l.inArray(n.allVideosHash,s))&&(s.splice(a,1),n.$filterListItems.find('.filter-demand-label[data-filter-slug="'+n.allVideosHash+'"]').remove(),d.location.hash=n.options.hashPrefix+s.join("/"))),t&&-1===o&&s.push(e),t||-1===o||s.splice(o,1),s=n.options.hashPrefix+s.join("/"),i!==n.options.hashPrefix+s&&(n.updateLocationHash(s),n.renderFilterList())},renderErrorBlock:function(e){this.element.find(".filter-result").remove(),this.$demandVideosList.html('<label class="text-danger filter-message">'+e+"</label>")},getVideos:function(t){var n=this,e=l(".filter-demand-selections").find('[data-filter-group="teacher"]').length;l.fn.callAjaxGlobal({url:yahAjax.ajaxurl,data:{action:n.options.action,hash:d.location.hash,staff:e?1:0,itemsPerPage:n.itemsPerPage,page:t},loader:!0}).done(function(e){e&&e.success&&(s&&s.destroy(),0===parseInt(e.data.total)?n.renderErrorBlock(n.options.errorMessage):n.renderVideoItems(e.data.asset_list_html,e.data.total,t))}).fail(function(e,t,a){n.renderErrorBlock(e.responseText)})},renderVideoItems:function(e,t,a){var n=this,i=a*n.itemsPerPage;t<i&&(i=t),n.element.find(".filter-result").remove(),n.$filterListItems.before('<label class="filter-result">Showing <span>'+i+"</span> of "+t+" videos</label>"),1===a?n.$demandVideosList.html(e):n.$demandVideosList.append(e),l(d).trigger("scrollmagic:change"),l("[data-toggle-action]")["toggle-action"]("init"),l.fn.handleActionOnDemand(),i<t&&(s=new Waypoint({element:n.$demandVideosList,handler:function(e){"down"===e&&n.getVideos(a+1)},offset:"bottom-in-view"}))},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new i(this,t))})},l.fn[n].defaults={hashPrefix:"#/",hash:"#/all-videos"},l(function(){l("[data-"+n+"]")[n]()})}(jQuery,window),function(o){"use strict";var n="onboarding-process";function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.itemImage=this.element.find("[data-thumb-image]"),this.handleEvent()},handleEvent:function(){var s=this;s.itemImage.on("click",function(e){var t=o(this),a=t.find('input[type="checkbox"]'),n=a.prop("checked"),i="unchecked";t.toggleClass("item-checked").removeClass(i),a.prop("checked",!n),n&&t.addClass(i);t=o(this).closest(".step-content"),i=t.find('input[type="hidden"]'),t=t.find('input[type="checkbox"]:checked');s.storeCheckedValue(t,i),e.preventDefault()})},storeCheckedValue:function(e,t){e=e.map(function(){return this.value}).get().join(",");t.val(e)},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(s){"use strict";var n="onboarding-subscribe",o="active",a="d-none",e="click."+n,t="change."+n,l=null;function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$subscriptionTab=this.element.find("[data-subscribe-tab]"),this.$subscriptionContent=this.element.find("[data-subscribe-content]"),this.$subscriptionSwitch=this.element.find("[data-subscribe-switch-title]"),this.$subscriptionPromo=this.element.find("[data-subscribe-promo]"),this.$subscriptionPromoImg=this.element.find("[data-subscribe-promo-image]"),this.$subscriptionPlanNextBtn=this.element.find("[data-btn-onboarding-plan-next-btn]"),this.$subscriptionBackBtn=this.element.find("[data-onboarding-subscribe-back-btn]"),this.$ccFormInputs=this.element.find(".cc-form-inputs"),this.$chbxIntlPayment=this.element.find(".intl-payment-wrap"),this.$intlPayment=this.$chbxIntlPayment.find("[data-intl-payment]"),this.noCcRequired=!1,this.handleEvent(),this.initSwitch()},handleEvent:function(){var i=this;this.$subscriptionTab.off(e).on(e,function(){var e=s(this),t=e.data().subscribeTab,a=e.find('input[name="switch_plan"]').val(),n=s(".ywah-onboarding-checkout");void 0===a||a.length<1||(l=a,i.element.find('input[name="plan_code"]').val(a),s('.checkout-form-promo input[name="plan_code"]').val(a),s("[data-cart-detail-wrap]").hide(),i.element.find('input[name="gift_card_code"]').val(""),s("[data-promo-code-open-popup-btn]").removeClass("d-none").addClass("d-inline-block"),n.find(".title-wrapper").show(),n.find(".cc-form-inputs").show(),n.find(".intl-payment-wrap").show(),e.hasClass("active")||(i.$subscriptionTab.removeClass(o),e.addClass(o),i.$subscriptionContent.removeClass(o),i.element.find('[data-subscribe-content="'+t+'"]').addClass(o),s(".apply-code span").trigger("click"),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()))}),this.$subscriptionSwitch.off(t).on(t,function(e){e.preventDefault(),i.element.find('[data-subscribe-tab="tab-'+s(this).val()+'"]').trigger("click")}),this.element.off("applied-code").on("applied-code",function(e,t){e.preventDefault(),void 0!==t.noccrequired&&t.noccrequired&&(i.element.find('input[name="plan_code"]').val(t.plan_code),i.noCcRequired=!0,i.element.find(".validate-error").hide(),i.$ccFormInputs.addClass(a),i.$chbxIntlPayment.addClass(a),i.$subscriptionTab.addClass(a),i.$subscriptionContent.addClass(a),i.$subscriptionPromo.html(t.plan_data.name?"<h5>  <span>SUBSCRIPTION: </span>  "+t.plan_data.name+"</h5>":"").removeClass(a).css("display","block"),i.$subscriptionPromoImg.removeClass(a).css("display","block"),i.$subscriptionSwitch.parent().css("display","none")),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()}).off("cancel-code").on("cancel-code",function(e){e.preventDefault(),i.noCcRequired&&(i.element.find('input[name="plan_code"]').val(l),i.noCcRequired=!1,i.element.find(".validate-error").hide(),i.$ccFormInputs.removeClass(a),i.$ccFormInputs.find("label.error").hide(),i.$ccFormInputs.find("input[type=text]").val("").removeClass("error"),i.$ccFormInputs.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),i.$chbxIntlPayment.removeClass(a),i.$intlPayment.prop("checked",!1).triggerHandler("click"),i.$subscriptionTab.removeClass(a),i.$subscriptionContent.removeClass(a),i.$subscriptionPromo.addClass(a).css("display","none"),i.$subscriptionPromoImg.addClass(a).css("display","none"),i.$subscriptionSwitch.parent().css("display","block"),i.element.find(".onboarding-plan-item.onboarding-plan-primary").trigger("click")),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()}),this.$subscriptionBackBtn.off(e).on(e,function(e){e.preventDefault();e=s(this).data("to-step");void 0!==e&&2===parseInt(e)?(s(".onboarding-start-profile").hide(),s(".onboarding-checkout-plan-list").show()):(s(".onboarding-start-profile").show(),s(".onboarding-checkout-plan-list").hide()),s(".onboarding-checkout").hide()}),this.$subscriptionPlanNextBtn.off(e).on(e,function(e){e.preventDefault();var t=s(".ywah-onboarding-plan-list"),a=t.find('input[name="switch_plan"]:checked'),n=a.parent("label"),i=s(".ywah-onboarding-checkout-new"),e=n.find("[data-subscribe-title]").html().replace(/<[^>]+>/gi," "),n=n.find("[data-subscribe-desc]").html();i.find('input[name="plan_code"]').val(a.val()),i.find("[data-onboarding-plan-detail-wrap]").html("<h5><span>SUBSCRIPTION:</span>"+e+"</h5>"+n),t.closest(".onboarding-checkout-plan-list").hide(),s(".onboarding-checkout").show()})},updatePlanTitleBox:function(){var e=this.element.find("[data-subscribe-tab]:not(.active)").find("[data-subscribe-title]").html().replace(/<[^>]+>/gi," ");this.$subscriptionSwitch.text("SWITCH TO "+s("<p>"+e+"</p>").text())},initSwitch:function(){this.element.find("[data-subscribe-tab].active").trigger("click")},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(n,a){"use strict";var i="onboarding-tabs",s="active";function o(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}o.prototype={init:function(){this.$formProcess=n("#form-onboarding-process"),this.$processContainer=n("[data-onboarding-process]"),this.$contentTabs=this.$processContainer.find("[data-content]"),this.$btnSkipStep=this.$processContainer.find("[data-skip-step]"),this.$btnNextStep=this.$processContainer.find("[data-next-step]"),this.$btnBackStep=this.$processContainer.find("[data-back-step]"),this.$headerDesktop=this.element.find(".header-main-desktop"),this.$headerMobile=this.element.find(".header-main-mobile"),this.$headerCurrent=n.fn.isMobile()?this.$headerMobile:this.$headerDesktop,this.$navTabs=this.element.find("[data-item]"),this.$navTabStart=this.element.find("[data-onboarding-start]"),this.handleEvent(),this.handleShowBack()},handleEvent:function(){var a=this;this.$navTabStart.on("click",function(e){e.preventDefault(),a.$navTabs.eq(0).click()}),this.$navTabs.on("click",function(e){var t=n(e.currentTarget),e=t.data("item");t.hasClass(s)||(a.$navTabs.removeClass(s),a.$contentTabs.addClass("d-none"),a.$processContainer.find('[data-content="'+e+'"]').removeClass("d-none"),a.element.find('[data-item="'+e+'"]').addClass(s).removeClass("disabled"),n.fn.isMobile()&&(n(".onboarding-thumbnail .row").hasClass("slick-initialized")&&n(".onboarding-thumbnail .row").slick("unslick"),n.fn.initSliderOnBoardingProcess(n('[data-content="'+e+'"]'))),a.handleShowBack())}),this.$btnNextStep.on("click",function(e){n(this).closest("[data-content]").find('input[type="hidden"]').val().length&&a.handleNextStep(!0)}),this.$btnSkipStep.on("click",function(e){e.preventDefault(),a.handleNextStep(!1)}),this.$btnBackStep.on("click",function(e){e.preventDefault();e=a.$headerCurrent.find("[data-item].active").prev();0<e.length&&e.trigger("click")})},handleNextStep:function(e){var t=this.$headerCurrent.find("[data-item].active").next(),a=this.element.find("[data-item].active");0<t.length?(e&&a.addClass("completed"),t.trigger("click")):this.submitForm()},handleShowBack:function(){void 0!==this.$headerCurrent.find("[data-item].active").prev().data("item")?this.$btnBackStep.find("span").show():this.$btnBackStep.find("span").hide()},submitForm:function(){var e=this,t=this.generateDataSend();ywah_onboarding_helper.submit_onboarding_process_step(e.$formProcess,t,function(){a.location=e.$formProcess.data("onboarding-redirect")})},generateDataSend:function(){var a={};return this.$formProcess.find('input[type="hidden"]').each(function(){var e=n(this),t=e.val(),e=e.attr("name");a[e]=t}),a},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new o(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(s){"use strict";var n="playlist-action-control",e="click."+n,i="d-none",o=!1;function l(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}l.prototype={init:function(){var e=this;e.$actionBtnDelete=e.element.find("[data-delete-playlist]"),e.$modalDeletePlaylist=s("[data-playlist-delete-modal]"),e.$modalBtnDelete=e.$modalDeletePlaylist.find("[data-btn-accept]"),e.$modalDeleteMessage=e.$modalDeletePlaylist.find(".general-error"),e.$formDelete=e.$modalDeletePlaylist.find("form.form"),e.$loadingDelete=e.$modalDeletePlaylist.find(".img-loading"),e.$actionBtnRename=e.element.find("[data-rename-playlist]"),e.$modalRenamePlaylist=s("[data-playlist-rename-modal]"),e.$modalBtnRename=e.$modalRenamePlaylist.find("[data-btn-rename-playlist]"),e.$modalNewPlaylistNameInput=e.$modalRenamePlaylist.find('[name="new-playlist-name"]'),e.$modalRenameMessage=e.$modalRenamePlaylist.find(".general-error"),e.$formRename=e.$modalRenamePlaylist.find("form.form"),e.$loadingRename=e.$modalRenamePlaylist.find(".img-loading"),e.$actionPlaylistRemoveVideo=e.element.find("[data-playlist-remove-video]"),e.$actionBtnDeleteCached=null,e.$actionBtnRenameCached=null,e.handleEvents()},handleEvents:function(){var a=this;a.$actionBtnRename.off(e).on(e,function(){var e=s(this),t=e.data("playlist-name");a.$modalRenameMessage.html(""),a.$actionBtnRenameCached=e,a.$modalRenamePlaylist.find('input[name="new-playlist-name"]').val(t).focus(),void 0!==t&&0<t.length&&a.$modalBtnRename.prop("disabled",!1)}),a.$modalBtnRename.off(e).on(e,function(e){e.preventDefault(),a.renamePlaylistNameEvent(s(this))}),a.$modalNewPlaylistNameInput.off("input").on("input",function(e){e.preventDefault(),a.$modalRenameMessage.html(""),0<a.$modalNewPlaylistNameInput.val().length?a.$modalBtnRename.prop("disabled",!1):a.$modalBtnRename.prop("disabled",!0)}),a.$actionBtnDelete.off(e).on(e,function(e){e.preventDefault(),a.$modalDeleteMessage.html("").removeClass("mb-3"),a.$modalBtnDelete.prop("disabled",!1),a.$actionBtnDeleteCached=s(this)}),a.$modalBtnDelete.off(e).on(e,function(e){e.preventDefault(),a.$modalDeleteMessage.html("").removeClass("mb-3"),a.deletePlaylistEvent()}),a.$actionPlaylistRemoveVideo.off(e).on(e,function(){a.removeVideoFromPlaylist(s(this))}),s(".playlist-wrapper .nav-link").on("shown.bs.tab",function(){a.updateHeightHeader()}),s("[data-playlist-delete-modal], [data-playlist-rename-modal]").on("show.bs.modal hidden.bs.modal",function(){a.updateHeightHeader()}),s(".lists-accordion-collapse").on("shown.bs.collapse hidden.bs.collapse",function(){a.updateHeightHeader()})},renamePlaylistNameEvent:function(e){var n=this,t=n.$modalNewPlaylistNameInput.val(),a=n.$actionBtnRenameCached.parents(".lists-accordion-item").find(".lists-accordion-desc h5");void 0!==t&&t?(n.$modalBtnRename.prop("disabled",!0),o||(o=!0,n.$formRename.addClass(i),n.$loadingRename.removeClass(i),s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),playlistId:n.$actionBtnRenameCached.data("playlist-id"),playlistName:t,formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.$modalRenamePlaylist.modal("hide"),a.text(e.data.playlistName),n.$actionBtnRenameCached.data("playlist-name",e.data.playlistName)):(n.$modalRenameMessage.html(e.data.message),n.$modalNewPlaylistNameInput.focus()),n.$modalBtnRename.prop("disabled",!1),o=!1,n.$formRename.removeClass(i),n.$loadingRename.addClass(i)}).fail(function(e,t,a){n.$modalRenameMessage.html("Invalid request."),n.$modalNewPlaylistNameInput.focus(),n.$modalBtnRename.prop("disabled",!1),o=!1,n.$formRename.removeClass(i),n.$loadingRename.addClass(i)}))):(n.$modalRenameMessage.html("The playlist name is required."),n.$modalNewPlaylistNameInput.focus())},deletePlaylistEvent:function(){var n=this,t=n.$actionBtnDeleteCached;n.$modalBtnDelete.prop("disabled",!0),o||(o=!0,n.$formDelete.addClass(i),n.$loadingDelete.removeClass(i),s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.data("action"),playlistId:t.data("playlist-id"),formCheck:t.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.$modalDeletePlaylist.modal("hide"),t.parents(".lists-accordion-item").remove()):n.$modalDeleteMessage.html(e.data.message).addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),o=!1,n.$formDelete.removeClass(i),n.$loadingDelete.addClass(i)}).fail(function(e,t,a){n.$modalDeleteMessage.html("Invalid request.").addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),o=!1,n.$formDelete.removeClass(i),n.$loadingDelete.addClass(i)}))},removeVideoFromPlaylist:function(e){var t=e.data(),a=e.parents(".watched-item"),n=s("#playlist-total-videos-"+t.playlistId),i=parseInt(n.text());s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.action,videoId:t.videoId,playlistId:t.playlistId,formCheck:t.formCheck},loader:!0}).done(function(e){a.remove(),i--,n.text(0<i?i:0)}).fail(function(e,t,a){})},updateHeightHeader:function(){var e=s("header"),t=s(".header-main");setTimeout(function(){t.trigger("update-height",e)},0)},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new l(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(s,o){"use strict";var l,n="playlist-watched";function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$win=s(o),this.$watchedWrapper=this.element.find("[data-playlist-watched-wrapper]"),this.itemsPerPage=this.options.itemsPerPage?parseInt(this.options.itemsPerPage):12,this.getVideos(1),this.handleEvent()},handleEvent:function(){var e=this;this.$win.on("scrolled",function(){l&&e.element.is(":visible")&&l.enable()})},getVideos:function(t){var n=this;s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:n.options.action,ipp:n.itemsPerPage,page:t,formcheck:n.options.nonce},loader:!0}).done(function(e){e&&e.success&&(l&&l.destroy(),0===parseInt(e.data.total)?n.renderErrorBlock(n.options.errorMessage):n.renderVideoItems(e.data.watchedHtml,e.data.total,t))}).fail(function(e,t,a){n.renderErrorBlock(e.responseText)})},convertWatchedDate:function(){var t=this;this.element.find("[data-convert-to-date]").not(".convert-date").each(function(){var e=s(this).data("convert-to-date"),e=moment(e,"X").format("lll"),e=moment(new Date(e)).format(t.options.dateFormat);s(this).html(e).addClass("convert-date")})},renderVideoItems:function(e,t,a){var n=this,i=a*n.itemsPerPage;t<i&&(i=t),1===a?n.$watchedWrapper.html(e):n.$watchedWrapper.append(e),this.convertWatchedDate(),s(o).trigger("scrollmagic:change"),i<t&&(l=new Waypoint({element:n.$watchedWrapper,handler:function(e){"down"===e&&n.getVideos(a+1)},enabled:!1,offset:"bottom-in-view"}))},renderErrorBlock:function(e){this.$watchedWrapper.html('<label class="text-danger watched-message">'+e+"</label>")},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={dateFormat:"MM/DD/YYYY"},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(d){"use strict";var n="subscription-plan";function i(e,t){this.element=d(e),this.options=d.extend({},d.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$input=this.element.find("[data-radiobox]"),this.$btnPlanDetail=this.element.find("[data-btn-plan-detail]"),this.handleEvent()},handleEvent:function(){var n=this,i=n.options.classPlanDetail,s=n.options.classDescParagraph,o=n.options.classWrapForm,l=n.options.classHidden;this.$input.on("change",function(e){d(i).addClass(l),d(s).addClass(l);var t=d(this).closest(o).find(i),a=d(this).data("subs-id")||"";t.removeClass(l),n.element.find('input[name="subscription_id"]').val(a)}),this.$btnPlanDetail.on("click",function(e){d(this).closest(o).find(s).removeClass(l)}),d(".modal-subscription-plan").on("hidden.bs.modal",function(e){var t=d(this);t.find(".plan-detail").addClass("d-none"),t.find(".description-paragraph").addClass("d-none")}),d("#subscriptionPlan").on("shown.bs.modal",function(e){var t=d(this),a=t.find('input[name="subscription_id"]').val();void 0!==a&&a&&t.find(".deactivate-plan-group").show().find("input").attr("data-subs-id",a)})},handleUpdatePlan:function(t){var e=t.parents("form"),a=e.serializeArray();e.find(".text-danger").remove(),d.ajax({type:"POST",url:yahAjax.ajaxurl,data:a,cache:!1,success:function(e){e.success?d(".modal").modal("hide"):console.log("Fail scenario")},error:function(e){console.log(e);e='<label class="text-danger">'+e.statusText+"</label>";t.parents("form").append(e)}})},destroy:function(){d.removeData(this.element[0],n)}},d.fn[n]=function(t,a){return this.each(function(){var e=d.data(this,n);e?e[t]&&e[t](a):d.data(this,n,new i(this,t))})},d.fn[n].defaults={classPlanDetail:".plan-detail",classDescParagraph:".description-paragraph",classWrapForm:".form-group-wrap",classHidden:"d-none"},d(function(){d("[data-"+n+"]")[n]()})}(jQuery,window),function(e,t){var i,s,o,l,d,r,c,h,a,m=t.createElement.bind(t),u=t.createTextNode.bind(t),p=m("span");(a=p.style).position="absolute",a.whiteSpace="pre",a.visibility="hidden",a=function(a,n){var e=!a.ownerDocument;if(!e&&e!==t){for(o=d=0,h=!(l=1),s=a.clientWidth,i=(a.textContent||a.innerText).replace(/\n/g," ");null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(p),i.replace(/ /g,function(e,t){l!==n&&(p.appendChild(u(i.substr(o,t-o))),s<p.clientWidth?(o=h?(c=i.substr(o,t+1-o),t+1):(c=i.substr(o,d-o),d),(r=m("span")).appendChild(u(c)),a.appendChild(r),h=!0,l++):h=!1,d=t+1,p.removeChild(p.firstChild))}),a.removeChild(p),r=m("span"),(e=r.style).display="inline-block",e.overflow="hidden",e.textOverflow="ellipsis",e.whiteSpace="nowrap",e.width="100%",r.appendChild(u(i.substr(o))),a.appendChild(r)}},e.clamp=a}(window,document),$(window).on("hero:ready resized",function(e,t){var a,n;t&&(a=t.find("[data-text-overflow-clamp]"),n=function(n){a.each(function(){var e=$(this),t=e.data("not-init-clamp"),a=e.find("p"),e=void 0!==n?n:parseInt(e.data("line-clamp"));t||clamp(a[0],e)})},t.data("not-init-text-overflow")||!1?n(0):n())}),function(n,e){"use strict";function i(e,t,a){a?e.removeClass("open"):(t.setPotstion(),e.addClass("open").css("height","auto"))}var s="textpanel",o=n("body"),l=n(e);function d(e,t){this.element=n(e),this.options=n.extend({},n.fn[s].defaults,this.element.data(),t),this.init()}d.prototype={init:function(){var e,t=this,a=this.options.extraStyles||"";this.element.wrap('<div class="textpanel-wrap based-styles '+a+'" style="height: '+this.options.maxHeight+'px"></div>'),this.element.height()>this.options.maxHeight&&((a=this.element.closest(".textpanel-wrap")).append('<button type="button" class="view-more"><span class="inner"><span></span><span></span><span></span></span></button>'),this.clonedEl=a.clone().addClass("cloned").appendTo(o),this.element.closest(".textpanel-wrap").on("click."+s,".view-more",function(){var e=n(".textpanel-wrap.open");e.length&&!e.is(t.clonedEl)&&i(e,t,!0),i(t.clonedEl,t,!1)}),this.clonedEl.on("click."+s,".view-more",function(){i(n(this).closest(".textpanel-wrap"),t,!0)})),l.on("resize."+s,function(){clearTimeout(e),e=setTimeout(function(){t.hide()},100)})},hide:function(){i(n(".textpanel-wrap.open"),this,!0)},setPotstion:function(){var e,t,a;this.clonedEl&&(e=(t=this.element.closest(".textpanel-wrap")).width(),t=(a=t.offset()).top,a=a.left,this.clonedEl.css({top:t,left:a,width:e+30}))},clean:function(){this.clonedEl&&this.clonedEl.remove(),this.element.unwrap().parent().find(".view-more").remove()},destroy:function(){this.clean(),n.removeData(this.element[0],s)},reInit:function(){this.clean(),this.init()}},n.fn[s]=function(t,a){return this.each(function(){var e=n.data(this,s);e?e[t]&&e[t](a):n.data(this,s,new d(this,t))})},n.fn[s].defaults={maxHeight:80,extraStyles:null},n(function(){n("[data-"+s+"]")[s]()})}(jQuery,window),function(n){"use strict";var i="time-line";function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.element.slick(this.options)},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={dots:!1,infinite:!1,slidesToShow:10,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:3,dots:!1,arrows:!1}}]},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(l){"use strict";var n="toggle-action",e="click."+n,t="document-click."+n,i="active";function s(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.$doc=l(document),this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.$currentBtn=null,this.$currentList=null,this.dataSend={}},handleEvent:function(){var o=this;this.element.off(e).on(e,function(e){e.preventDefault(),e.stopPropagation(),o.handleActionList(l(this))}),l("[data-action-item]").off(e).on(e,function(e){e.preventDefault();var t=l(e.currentTarget),a=t.closest(".action-list").attr("id"),n=l('[data-target-action="#'+a+'"]'),i=t.data(),s=l("#"+a).is("[data-playlist-control]"),a=i.toggleModal;if(o.getCurrentAction(n),s)return e.stopPropagation(),o.hideAction(),void l(a).modal("show");o.dataSend=i,a&&a.length?(o.hideAction(),l(a)["playlist-framework-modal"]("showModal",{modalId:a,dataItem:o.dataSend})):o.callAjax(function(e){o.handleActionCall(e,t)})}),this.element.off("trigger-hide-action").on("trigger-hide-action",function(e){o.getCurrentAction(l(e.currentTarget)),o.hideAction()}),this.$doc.off(t).on(t,function(e,t){var a=l("[data-target-action].active");a.length&&(o.getCurrentAction(a),o.clickOuside(t))})},clickOuside:function(e){var t,a,n=e.target;t=this.$currentBtn,a=this.$currentList,!t.is(n)&&0===t.has(n).length&&t.hasClass(i)&&!a.is(n)&&0===a.has(n).length&&a.hasClass(i)&&this.hideAction()},handleActionCall:function(e,t){e.success&&e.data.text&&(t.data("is-save",e.data.saved?0:1),t.text(e.data.text)),this.hideAction()},handleActionList:function(e){var t=e.hasClass(i),a=l("[data-toggle-action]");this.getCurrentAction(e),a.not(e).each(function(){var e=l(this).parents(".demand-item-bubble-list").siblings(".action-list");l(this).removeClass(i),e.removeClass(i)}),t?this.hideAction():this.showAction()},getCurrentAction:function(e){var t=e.data("target-action");this.$currentBtn=e,this.$currentList=l(t)},hideAction:function(){this.$currentBtn.removeClass(i),this.$currentList.removeClass(i)},showAction:function(){this.$currentBtn.addClass(i),this.$currentList.addClass(i)},callAjax:function(t){var e=this.dataSend;l.ajax({type:this.options.method,url:this.options.url,data:e,cache:!1,success:function(e){"function"==typeof t&&t(e)},error:function(e){console.log(e)}})},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new s(this,t))})},l.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},l(function(){l("[data-"+n+"]")[n]()})}(jQuery,window),function(h,a){"use strict";var s="upcoming-events",r={},l={},m=null;function n(e,t){this.element=h(e),this.options=h.extend({},h.fn[s].defaults,this.element.data(),t),this.allowedAccess=this.options.allowedAccess||!1,this.init()}n.prototype={init:function(){var e=this;e.$wrapperSlider=e.element.find("[data-slider]"),e.$bubble=h("[data-bubble-countdown]"),e.renderBubble(),e.getUpcomingEventData(function(){e.initUpcomingEvents()})},initUpcomingEvents:function(){var i=this,s=i.getUpcomingEvents();s&&s.length&&(i.renderUpcomingEvents(s),i.$wrapperSlider.on("init",function(e){i.renderCountdown(s[0])}),i.$wrapperSlider.on("beforeChange",function(e,t,a,n){i.$bubble.find(".bubble-wrap").addClass("d-none"),clearTimeout(m)}),i.$wrapperSlider.on("afterChange",function(e,t){var a=h(".slick-current").find("[data-event-id]").data("event-id"),n=h.grep(s,function(e){return e.eventId===a});0<n.length&&(i.$bubble.find(".bubble-wrap").addClass("d-none"),i.renderCountdown(n[0]))}))},getUpcomingEventData:function(t){h.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:this.options.action,siteIds:this.options.siteIds,formCheck:this.options.formCheck,marianatekLocations:this.options.marianatekLocations,marianatekShowLiveClasses:this.options.showLiveClasses,marianatekShowPhysicalStudios:this.options.showPhysicalStudios},loader:!0}).done(function(e){e&&e.success&&(r=e.data.upcomingClasses,l=e.data.bgImages,"function"==typeof t&&t())}).fail(function(e,t,a){})},getUpcomingEvents:function(){for(var e=this.options.numberOfClass?parseInt(this.options.numberOfClass):1,t=!!this.options.useEndDate,a=r?r.length:0,n=moment().unix(),i=[],s=0,o=0;o<a;o++){var l=r[o],d=n<(t?l.endTimeZonedStamp:l.startTimeZonedStamp)&&!l.isCanceled;if(e<=s)break;d&&(l.eventId=l.siteId+"-"+l.classId,i.push(l),s++)}return 1<i.length&&i.sort(function(e,t){return e.startTimeZonedStamp>t.startTimeZonedStamp}),i},renderUpcomingEvents:function(e){var t=this,s="",o=t.options.lineClamp||2;e.forEach(function(e){var t=e.siteId+"-"+e.classId,a=e.siteId+"_"+e.classId,n=l?l[Math.floor(Math.random()*l.length)]:"",i=e.level?"<span>"+e.level+"</span>":"";s+='<div class="slider-item" style="background-image: url('+n+');" data-slider-event-id="'+a+'">  <img src="'+n+'" alt="">  <div class="slider-caption d-md-block slider-description">    <h2>'+e.title+"</h2>    <h5>"+e.teacherName+i+" <span>"+e.duration+' min</span>    </h5>    <div class="description-paragraph" data-text-overflow-clamp data-line-clamp="'+o+'">      <p>'+e.desc+'</p>    </div>    <div class="upcoming-cta-result"></div>    <div data-event-id="'+t+'"></div>  </div></div>'}),t.$wrapperSlider.html(s),h(a).trigger("hero:ready",[t.element]),setTimeout(function(){t.$wrapperSlider.slick({slidesToShow:1,dots:!0,autoplay:!0,autoplaySpeed:t.options.autoplaySpeed,pauseOnFocus:!0,pauseOnHover:!0,vertical:!0,arrows:!1,infinite:!0,useCSS:!1}).on("beforeChange",function(){h(".slider-item").removeClass("slide-prev slide-next")}).on("setPosition",function(){h(".slick-current.slick-active").prev().addClass("slide-prev"),h(".slick-current.slick-active").next().addClass("slide-next")})},500)},renderErrorMessage:function(e){var t=e.message;h('[data-slider-event-id="'+e.itemId+'"] .upcoming-cta-result').html(t).toggleClass("d-inline-block",!(void 0===t||""===t))},renderBubble:function(){function e(e){for(var t='<div class="number-grp-wrp">',a=e;0<=a;a--)t+='<div class="num num-'+a+'"><p>'+a+"</p></div>";return t+="</div>"}h("[data-bubble-countdown]").html('<div class="bubble-wrap zoom-effect d-none">  <div class="fuzzy-bubble solid-color"></div>  <div class="description-bubble">    <div class="description-bubble__content description-bubble__countdown d-none" data-start-countdown>      <p class="text-in-bubble context-3">LIVE IN</p>      <div class="timer">        <div class="timer--clock">          <div class="minutes-group clock-display-grp" data-minutes-group>            <div class="first number-grp" data-first-number>'+e(9)+'</div>            <div class="second number-grp" data-second-number>'+e(9)+'</div>          </div>          <div class="clock-separator"><p>m</p></div>          <div class="seconds-group clock-display-grp" data-seconds-group>            <div class="first number-grp" data-first-number>'+e(9)+'</div>            <div class="second number-grp" data-second-number>'+e(9)+'</div>          </div>          <div class="clock-separator"><p>s</p></div>        </div>      </div>    </div>    <div class="description-bubble__content description-bubble__text d-none" data-end-countdown>      <a href="#" class="btn-livestream-join" data-btn-livestream-join>         <h5 class="text-in-bubble text-white">'+this.options.ctaJoinText+"</h5>      </a>    </div>  </div></div>")},renderCountdown:function(e){var t,a,n,i;void 0!==e&&(t=this,a=e.startTimeZonedStamp-moment().unix(),n=this.options.timeShowCountdown?parseInt(this.options.timeShowCountdown):3600,i=this.options.timeShowCta?parseInt(this.options.timeShowCta):300,a<n&&n<this.options.limitTimeShowCountdown?t.allowedAccess?(t.startCountdownEvent(a,i),i=parseInt(e.duration),i=isNaN(i)?-1800:-60*i,h("[data-end-countdown] .btn-livestream-join").attr({"data-site-id":e.siteId,"data-class-id":e.classId,"data-class-schedule-id":e.classSchedId,"data-room-name":e.resourceName,"data-loc-id":e.locId,"data-loc-name":e.location,"data-title":e.title,"data-teacher":e.teacherName,"data-is-free":0,"data-level":e.level,"data-yoga-type":e.yogaType,"data-start-stamp":e.startTimeZonedStamp,"data-end-stamp":parseInt(e.startTimeZonedStamp)-i,"data-plugin-name":s}).find("h5").removeClass("text-white").text(t.options.ctaJoinText)):(t.$bubble.find(".bubble-wrap").removeClass("d-none"),h("[data-end-countdown]").removeClass("d-none").find(".btn-livestream-join").removeAttr("data-btn-livestream-join").attr("href",t.options.ctaUpgradeUrl).find("h5").addClass("text-white").text(t.options.ctaUpgradeText)):t.$bubble.find(".bubble-wrap").addClass("d-none"))},startCountdownEvent:function(a,n){function i(e,t){TweenMax.killTweensOf(e.find(".number-grp-wrp")[0]),TweenMax.to(e.find(".number-grp-wrp")[0],1,{y:-e.find(".num-"+t)[0].offsetTop})}var s=this,e=s.element,t=e.find("[data-minutes-group]"),e=e.find("[data-seconds-group]"),o=t.find("[data-first-number]"),l=t.find("[data-second-number]"),d=e.find("[data-first-number]"),r=e.find("[data-second-number]"),c=function(){var e,t;n=n||300,a<=0||a<=n?s.stopCountdownEvent():(h("[data-start-countdown]").removeClass("d-none"),--a,e=Math.floor(a/60),t=a-60*e,e=e<10?"0"+e:e.toString(),t=t<10?"0"+t:t.toString(),i(o,(t=e+t)[0]),i(l,t[1]),i(d,t[2]),i(r,t[3]),m=setTimeout(c,1e3))};setTimeout(function(){s.$bubble.find(".bubble-wrap").removeClass("d-none"),h("[data-start-countdown]").addClass("d-none"),h("[data-end-countdown]").addClass("d-none")},800),m=setTimeout(c,1e3)},stopCountdownEvent:function(){h("[data-start-countdown]").addClass("d-none"),h("[data-end-countdown]").removeClass("d-none")},destroy:function(){h.removeData(this.element[0],s)}},h.fn[s]=function(t,a){return this.each(function(){var e=h.data(this,s);e?e[t]&&e[t](a):h.data(this,s,new n(this,t))})},h.fn[s].defaults={autoplaySpeed:3e3,lineClamp:2,allowedAccess:!1,ctaJoinText:"Join",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",limitTimeShowCountdown:6e3},h(function(){h("[data-"+s+"]")[s]()})}(jQuery,window),function(i){"use strict";var n="save-profile-validate",e="click."+n,a=/^(?!\s)(?!.*\s$)[a-zA-Z0-9\s()-]+$/,s=/^([a-zA-Z0-9_.+-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,o=/^([a-zA-Z0-9_.-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/;function l(e,t){this.element=i(e),this.options=i.extend({},i.fn[n].defaults,this.element.data(),t),this.init()}l.prototype={init:function(){this.cacheDOM(),this.initSaveProfileValidate(),this.handleEvent()},initSaveProfileValidate:function(){i.validator.addMethod("regexName",function(e,t){return a.test(e)}),i.validator.addMethod("regexEmail",function(e,t){return(void 0!==yahAjax.allowPlus&&yahAjax.allowPlus?s:o).test(e)}),this.$form.validate({rules:{name:{required:!0,regexName:!0},email:{required:!0,regexEmail:!0},address:{required:!0},postalcode:{required:!0}},messages:{name:"Please enter a valid name",email:"Please enter a valid email address",address:"Please enter an address",postalcode:"Please enter a postal code"},errorPlacement:function(e,t){t.closest(".form-group-wrap").after(e.addClass("validate-error"))}})},cacheDOM:function(){this.$form=this.element,this.$btnSaveProfile=this.element.find("[data-save-profile]")},handleEvent:function(){var t=this;this.$btnSaveProfile.off(e).on(e,function(e){e.preventDefault(),t.handleSaveProfileValidate(i(this),function(e){t.callAjaxSaveProfile(e)})})},handleSaveProfileValidate:function(e,t){var a=e.siblings("input, textarea");this.$form.validate().element(a)&&"function"==typeof t&&t(e)},callAjaxSaveProfile:function(a){var n=a.closest("form");i.fn.callAjaxGlobal({method:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:n.find('input[name="wpAction"]').val(),first_name:n.find("#firstName").val(),last_name:n.find("#LastName").val(),email_addr:n.find("#email").val(),formcheck:n.find("input#checkForm").val()},loader:!0}).done(function(e){var t=a.siblings(".form-control");e.success?(t.data("text-content",t.val()),a.addClass("d-none"),t.removeClass("text-change")):(e='{"'+t.attr("name")+'":"'+e.data.message+'"}',n.validate().showErrors(JSON.parse(e))),n.find("textarea").scrollTop(0)}).fail(function(e,t,a){})},destroy:function(){i.removeData(this.element[0],n)}},i.fn[n]=function(t,a){return this.each(function(){var e=i.data(this,n);e?e[t]&&e[t](a):i.data(this,n,new l(this,t))})},i.fn[n].defaults={method:"POST",url:yahAjax.upcomingLiveClasses},i(function(){i("[data-"+n+"]")[n]()})}(jQuery,window),function(l,e){"use strict";var n="vertical-line";function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.bindEvent()},cacheDOM:function(){this.$win=l(e),this.controller=null},bindEvent:function(){var e=this;this.$win.on("load resized scrollmagic:change",function(){e.handleScrollMagic()})},initScrollMagic:function(){var e,t,a,n,i=this.element,s=i.next(),o=i.closest("section");this.controller=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),s.length&&new ScrollMagic.Scene({triggerElement:s[0],offset:"-"+l("[data-menu-header]").outerHeight(),duration:(t=o,a=s,n=(e=i).outerWidth(!0),e=t.outerHeight(!0),t=t.offset().top,e-n-(a.offset().top-t))}).setPin(i[0],{pushFollowers:!1}).addTo(this.controller)},destroyScrollMagic:function(){this.controller&&(this.controller.destroy(!0),this.controller=null)},handleScrollMagic:function(){l.fn.isMobile()?this.destroyScrollMagic():(this.destroyScrollMagic(),this.initScrollMagic())},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new i(this,t))})},l.fn[n].defaults={},l(function(){l(".wrapper-vertical-line")[n]()})}(jQuery,window),function(r){function n(){return document.body.clientWidth}function i(){return window.innerHeight}function c(){return window.innerWidth>=e}var h=r(window),t=r(document),e=(r("body"),768);r.fn.isMobile=function(){return!c()};function m(){return h.scrollTop()}function s(){var a="sticky-header",e=r(".header-main"),n=e.parent(),i=e.find(".header-main-desktop"),s=e.find(".header-main-mobile"),o=c()?i:s,l=r(".header-ticket");function d(e){var t;e.hasClass("no-sticky-header")||(t=m(),e.toggleClass(a,50<t&&!r("body").hasClass("logged-in")))}function t(e){var t=l.length?l.outerHeight():0;e&&e.removeClass(a),e=o=c()?i:s,n.css({height:e.outerHeight()+t}),d(e)}e.addClass("header-fixed"),e.on("update-height",function(e){t(),h.trigger("scrollmagic:change")}),t(o),h.on("scrolled",function(){d(o)}).on("resized",function(){t(o)})}function o(){var e=r(".wrapper-vertical-line");0!==e.length&&e.each(function(){var e=r(this),t=e.innerWidth(),a=-(e.innerHeight()/2+7);e.addClass("rotate-line"),e.css({top:t,transform:"translateX("+a+"px)"})})}function l(){r(".testimonial-slider .row").slick({infinite:!1,slidesToShow:1,centerMode:!0})}function d(){r(".plan-wrapper").slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"20px"})}function u(){r(".link-carousel__slider").slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"20px"})}var a,p=n(),f=i(),v=c(),g=m();r.fn.handleHeightAutoComplete=function(e){function t(){i.css("max-height","")}var a,n,i=r(".ui-autocomplete-wrapper .ui-autocomplete"),s=r(".header-ticket").outerHeight()||0;i.length&&e&&!r.fn.isMobile()?(t(),a=r("#search_tagsinput").outerHeight()/2,n=i.css("max-height").split("px")[0],i.css("max-height",parseInt(n)-s-a+"px")):t()},r.fn.handleActionOnDemand=function(){var t=r("[data-list-action-pos]"),e=t.find(".action-list");0!==e.length&&(t.each(function(e){e=e%2==0?"action-right":"action-left";r(this).find(".action-list").addClass(e)}),t.off("mouseenter").on("mouseenter",function(){r(this).addClass("active")}).off("mouseleave").on("mouseleave",function(){var e=r(this).find("[data-toggle-action]");t.removeClass("active"),e.trigger("trigger-hide-action")}))},r.fn.initSliderOnBoardingProcess=function(e){var t=r(".onboarding-thumbnail .row");e&&(t=e.find(".onboarding-thumbnail .row")),t.slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"0px"})},r.fn.callAjaxGlobal=function(e){var t=r("[data-loader]");return r.ajax({url:e.url,method:e.method||"GET",data:e.data||{},dataType:"json",beforeSend:function(){e.loader&&t.fadeIn()},complete:function(){e.loader&&t.fadeOut("slow")}})},r.fn.getHashValue=function(e){var t,a={},e=e||window.location.href;if(-1<e.indexOf("#")){t=e.slice(e.indexOf("#")+1).split(/[&]+(?=(?:[a-z]))/g);for(var n=0;n<t.length;n++){var i=t[n].split("=");1<i.length&&(a[i[0]]=i[1])}}return a},r.fn.convertToCapitalize=function(e){return e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})};function b(){r('[data-toggle="tab"]').unbind("click").bind("click",function(){var e=r(this),t=e.attr("href");e.hasClass("active")||(t=t,location.hash=t)});var e=location.hash,t=[];e&&(t=r('[data-toggle="tab"][href="'+e+'"]'),(t=t)[0]&&t.click())}var y=function(e,t,a){for(var a=r('<div class="slider-dots '+a+'"></div>'),n=[],i=0;i<t;i++)n+=['<div class="slider-dots-item"></div>'].join("");a.append(n),e.empty().append(a)},C={common:{init:function(){var t,e,a,n,i;s(),o(),r(".live-schedule-block .description-bubble__countdown").addClass("d-none"),r(".live-schedule-block .description-bubble__text").removeClass("d-none"),a=r("[data-form-pwd]"),t=a.find("#password"),a.find(".show-pwd").on("click",function(e){e.preventDefault();e=r(this);"hide"===e.text().toLowerCase()?(e.html("Show"),t.attr("type","password")):(e.html("Hide"),t.attr("type","text"))}),r.fn.handleActionOnDemand(),(n=r(".carousel-widget-slider")).length&&r.each(n,function(e,t){var a=r(t),n=a.find(".demand-item"),t=a.parent().find(".slider-control .slider-nav");n.length<=3||a.slick({slidesToShow:3,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:t,appendDots:t,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{dots:!1,slidesToShow:1}}]})}),e=r(".logo-list-slider"),i=e.find(".logo-item").length,a=e.parent(),n=a.find(".slider-control .slider-nav"),y(n,i,"slider-dots-logo"),e.slick({infinite:!0,centerMode:!0,dots:!1,arrows:!1,asNavFor:".slider-dots-logo",slidesToShow:3,slidesToScroll:1,centerPadding:0,responsive:[{breakpoint:768,settings:{slidesToShow:1,centerPadding:"25%"}}]}),a.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".logo-list-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),r(".benefits-list-slider").slick({infinite:!1,arrows:!0,slidesToShow:1,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>'}),n=r(".style-list-slider"),i=n.find(".style-item").length,e=n.parent(),a=e.find(".slider-control .slider-nav"),y(a,i,"slider-dots-style"),n.slick({slidesToShow:3,slidesToScroll:1,dots:!1,infinite:!0,asNavFor:".slider-dots-style",arrows:!0,centerMode:!0,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',centerPadding:"20%",responsive:[{breakpoint:1024,settings:{slidesToShow:3,centerPadding:0}},{breakpoint:768,settings:{arrows:!1,slidesToShow:1,centerPadding:"25%"}}]}),e.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".style-list-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),a=r(".testimonial-block-slider"),i=a.find(".testimonial-block-item").length,n=a.parent(),e=n.find(".slider-control .slider-nav"),y(e,i,"slider-dots-testimonial"),a.slick({slidesToShow:3,slidesToScroll:1,centerPadding:0,dots:!1,infinite:!0,asNavFor:".slider-dots-testimonial",arrows:!0,centerMode:!0,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1,centerPadding:"25%"}}]}),n.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".testimonial-block-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),(i=r(".live-schedule-slider")).length&&(a=i.find(".live-content-item"),n=i.parent().find(".slider-control .slider-nav"),a.length<=3||i.slick({slidesToShow:3,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:n,appendDots:n,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{dots:!1,arrows:!1,slidesToShow:1,centerMode:!0,centerPadding:"20%"}}]})),r.fn.isMobile()&&(l(),d(),r.fn.initSliderOnBoardingProcess(),u())},finalize:function(){}}};h.on("breakpoint:change",function(){r.fn.isMobile()?(l(),d(),r.fn.initSliderOnBoardingProcess(),u()):(r(".testimonial-slider .row").hasClass("slick-initialized")&&r(".testimonial-slider .row").slick("unslick"),r(".plan-wrapper").hasClass("slick-initialized")&&r(".plan-wrapper").slick("unslick"),r(".onboarding-thumbnail .row").hasClass("slick-initialized")&&r(".onboarding-thumbnail .row").slick("unslick"),r(".link-carousel__slider").hasClass("slick-initialized")&&r(".link-carousel__slider").slick("unslick"))}),t.off("click.improve").on("click.improve",function(e){t.trigger("document-click",e)}),h.on("resized",function(){o()}),h.on("load",function(){function e(){a.slideUp(150,function(){a.remove(),n.trigger("update-height",t),r.fn.handleHeightAutoComplete(!1)})}var t,a,n,i,s,o,l,d;b(),t=r("header"),a=r(".header-ticket"),n=r(".header-main"),i=a.data("notification-id"),s=a.data("cookie-expires"),o=a.data("time-to-show"),l="_yah_notification_status_",d=r.cookie(l+i),a.on("click",".x-close",function(){e(),r.cookie(l+i,"hide",{expires:s||365,path:"/"})}),setTimeout(function(){"hide"===d?e():a&&a.hasClass("d-none")&&a.removeClass("d-none").slideDown(800,function(){n.trigger("update-height",t),r.fn.handleHeightAutoComplete(!0)})},o||1e3),r(".center").slick({arrows:!0,centerMode:!0,centerPadding:"0",slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!0,centerPadding:"0",slidesToShow:3}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}}]})}),h.off("resize.improve").on("resize.improve",function(){window.clearTimeout(a),a=window.setTimeout(function(){var e,t=n(),a=i();h.trigger("resized",[r("[data-upcoming-events]")]),p!==t&&(h.trigger("width-change"),e=c(),v!==e&&(h.trigger("breakpoint:change"),v=e),p=t),f!==a&&(h.trigger("height-change"),f=a)},180)}).off("scroll.improve").on("scroll.improve",function(){var e=m();h.trigger("scrolled"),e<g?h.trigger("scroll:up",e):g<e&&h.trigger("scroll:down",e),g=e});var w={fire:function(e,t,a){t=void 0===t?"init":t,""!==e&&C[e]&&"function"==typeof C[e][t]&&C[e][t](a)},loadEvents:function(){w.fire("common"),r.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){w.fire(t),w.fire(t,"finalize")}),w.fire("common","finalize")}};r(document).ready(w.loadEvents),r.fn.reCaptchaExecute=function(e){grecaptcha.execute(),"function"==typeof e&&e()},r.fn.reCaptchaReset=function(e){grecaptcha.reset(),"function"==typeof e&&e()},r("#login").on("shown.bs.modal",function(e){var t=encodeURI(r(location).attr("href"));r(this).find('input[name="redirect_to"]').val(t)}),r(".vertical-line").toggleClass("d-none",!r(".wrapper-vertical-line").length);function $(e,t,a,n){n={email:T.email,"data-products":T.memberPlanType||null,"data-siteID":n.siteId,"data-classID":n.classId,"data-classScheduleID":n.classScheduleId,"data-locID":n.locId,"data-locName":n.locName,"data-title":n.title,"data-teacher":n.teacher,"data-level":n.level,"data-is-free":n.isFree,"data-yoga-type":n.yogaType,"data-start-stamp":n.startStamp,"data-start-date":void 0!==n.startStamp?moment(n.startStamp,"X").format("YYYY-MM-DD"):"n/a","data-start-time":void 0!==n.startStamp?moment(n.startStamp,"X").format("LTS Z"):"n/a",zoomLink:a,error_message:n.errorMessage||null},r.ajax({url:yahAjax.ajaxurl,dataType:"json",method:"POST",data:{name:e?"zoomlink_SUCCESS":"zoomlink_FAILED",status:e,item_id:t,message:n,action:"ywah__live_log"},success:function(e){}})}function k(e,t,a){var n;"live-player"===e?(void 0!==(n=yahAjax.microServiceMsg||null)&&n&&/(locked|does not have any available configuration)/g.test(a)&&(a=n),r("[data-live-player-error-wrap]").show().find(".live-error-msg").html("Error: "+a)):r("[data-"+e+"]")[e]("renderErrorMessage",{itemId:t,message:a})}var S,x,T={};function _(e){for(var t,a=window.location.search.substring(1).split("&"),n=0;n<a.length;n++)if((t=a[n].split("="))[0]===e)return t[1],decodeURIComponent(t[1]);return!1}t.on("click","[data-btn-livestream-join]",function(e){e.preventDefault();var n,i,t,a=r(this),o=a.attr("data-site-id")+"_"+a.attr("data-class-id"),l={siteId:a.attr("data-site-id"),classId:a.attr("data-class-id"),classScheduleId:a.attr("data-class-schedule-id"),roomName:a.attr("data-room-name"),startStamp:a.attr("data-start-stamp"),endStamp:a.attr("data-end-stamp"),locId:a.attr("data-loc-id"),locName:a.attr("data-loc-name"),title:a.attr("data-title"),teacher:a.attr("data-teacher"),level:a.attr("data-level"),yogaType:a.attr("data-yoga-type"),isFree:a.attr("data-is-free"),jwtToken:""};r('[data-slider-event-id="'+o+'"] .upcoming-cta-result').html("").removeClass("d-inline-block"),r('[data-target="item-'+o+'"] .schedule-cta-result').html("").addClass("d-none"),n=a.attr("data-plugin-name"),i=o,t=function(){var n,i,s,e;l.jwtToken=T.jwtToken,n=a.attr("data-plugin-name"),i=o,e={siteId:(s=l).siteId,classId:s.classId,classScheduleId:s.classScheduleId,roomName:s.roomName,startStamp:s.startStamp,endStamp:s.endStamp,jwtToken:s.jwtToken},r.fn.callAjaxGlobal({url:yahAjax.microServiceUrl,dataType:"json",method:"POST",data:e,loader:!0}).done(function(e){var t,a;e.success?(a=function(e,t,a,n){if(void 0!==a&&""!==a&&void 0!==n&&""!==n){if(void 0!==e&&""!==e)return e;if(void 0!==t&&""!==t)return"https://zoom.us/j/"+t+"?prefer=1&un="+a+"&uel="+n}return null}(void 0!==e.data.streamUrl&&e.data.streamUrl,t=void 0!==e.data.videoId&&e.data.videoId,T.firstNameEncoded,T.emailEncoded))&&($(1,t,a,s),(a=window.open(a,"_self"))?a.focus():r(location).attr("href",url)):(s.errorMessage=e.data.msg,$(0,"","",s),k(n,i,e.data.msg))}).fail(function(e,t,a){e=void 0!==e.responseJSON.data.msg?e.responseJSON.data.msg:"";s.errorMessage=e,$(0,"","",s),k(n,i,e)})},r.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"ywah__live_verify_access"},loader:!0}).done(function(e){e.success&&e.data.jwtToken?(T=e.data,void 0!==t&&t()):k(n,i,e.data.message)}).fail(function(e,t,a){k(n,i,"Something went wrong! Please refresh the page and try again.")})}),r("[data-form-validate]").each(function(){var t=r(this),e=t.find("#card_number"),a=t.find("#zip"),n=t.find("#card_exp"),i=t.find("#card_cvv"),s=function(e){e=e.data("next-input"),e=t.find(e);return e.is(":hidden")?s(e):e};e.payment("formatCardNumber"),e.on("change keyup",function(){var e=r(".ico-cards"),t=r(this).val(),a=r.payment.cardType(t),n=r.payment.validateCardNumber(t),t=s(r(this));e.removeClass().addClass("ico ico-cards ico-card-"+a),n&&t.length&&t.focus()}),a.on("change keyup",function(){var e=r(this).val().length,t=parseInt(r(this).attr("maxlength")||5),a=s(r(this));e===t&&a.length&&a.focus()}),n.on("change keyup",function(){var e=r(this).val().length,t=parseInt(r(this).attr("maxlength")||5),a=s(r(this));e===t&&r(this).focusout();var n=r(this).closest(".form-group").find(".validate-error"),n=n.length&&n.is(":hidden")||!n.length;r(this).closest("[data-form-validate]")["form-validate"]("handleValidate"),e===t&&n&&a.length&&a.focus()}),i.on("change keyup",function(){var e=r(this).val().length,t=parseInt(r(this).attr("maxlength")||4),a=s(r(this));e===t&&a.length&&a.focus()})}),r("[data-global-search-form]").each(function(e,t){r(t).validate({rules:{s:"required"},messages:{s:""}})}),r("[data-subscribe-email-input]").on("input",function(){r('.checkout-form-gift-card input[name="user_email"]').val(r(this).val())}),r(document).on("show.bs.modal",".modal",function(){var e=1040+10*r(".modal:visible").length;r(this).css("z-index",e),setTimeout(function(){r(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")},0)}),_("product")&&_("sector")&&(S="?product="+_("product")+"&sector="+_("sector"),r.cookie("is_optimum_fitness",S)),(_("product")&&_("sector")||r.cookie("is_optimum_fitness"))&&(x=(x=r.cookie("is_optimum_fitness"))||"?product="+_("product")+"&sector="+_("sector"),r(".subscribe-modal-form-btn").on("click",function(e){e.preventDefault(),window.location.href=r(this).find("a").attr("href")+x})),r(".optimum-login").on("click",function(e){window.location.href=r(this).attr("data-url")})}(jQuery);
//# sourceMappingURL=main.js.map
