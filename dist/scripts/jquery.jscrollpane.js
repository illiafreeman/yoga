!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(jQuery||require("jquery")):e(jQuery)}(function(Te){Te.fn.jScrollPane=function(o){function s(k,e){var b,T,C,x,S,D,B,H,P,z,A,W,Y,M,X,R,L,E,I,t,F,V,q,O,G,N,K,Q,U,$,J,Z,_,ee,te=this,i=!0,n=!0,r=!1,a=!1,o=k.clone(!1,!1).empty(),oe=!1,se=Te.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ie=function(){0<b.resizeSensorDelay?setTimeout(function(){ne(b)},b.resizeSensorDelay):ne(b)};function ne(e){var t,o,s,i,n,r,a,l,c,p,d,u,f,h,g,j,v,m=!1,w=!1;if(b=e,void(o=t=0)===T)s=k.scrollTop(),i=k.scrollLeft(),k.css({overflow:"hidden",padding:"0"}),C=k.innerWidth()+_,x=k.innerHeight(),k.width(C),T=Te('<div class="jspPane"></div>').css("padding",Z).append(k.children()),S=Te('<div class="jspContainer"></div>').css({width:C+"px",height:x+"px"}).append(T).appendTo(k);else{if(k.css("width",""),S.css({width:"auto",height:"auto"}),T.css("position","static"),n=k.innerWidth()+_,r=k.innerHeight(),T.css("position","absolute"),m=b.stickToBottom&&(a=B-x,1!=b.maintainPosition||20<=a&&a-ke()<10),w=b.stickToRight&&(v=D-C,1!=b.maintainPosition||20<=v&&v-ye()<10),v=n!==C||r!==x,C=n,x=r,S.css({width:C+"px",height:x+"px"}),!v&&ee==D&&T.outerHeight()==B)return k.width(C),0;ee=D,T.css("width",""),k.width(C),S.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function y(){var e=L,t=M;switch(h){case 40:te.scrollByY(b.keyboardSpeed,!1);break;case 38:te.scrollByY(-b.keyboardSpeed,!1);break;case 34:case 32:te.scrollByY(x*b.scrollPagePercent,!1);break;case 33:te.scrollByY(-x*b.scrollPagePercent,!1);break;case 39:te.scrollByX(b.keyboardSpeed,!1);break;case 37:te.scrollByX(-b.keyboardSpeed,!1)}return g=e!=L||t!=M}T.css("overflow","auto"),D=e.contentWidth||T[0].scrollWidth,B=T[0].scrollHeight,T.css("overflow",""),H=D/C,z=1<(P=B/x)||b.alwaysShowVScroll,(A=1<H||b.alwaysShowHScroll)||z?(k.addClass("jspScrollable"),b.maintainPosition&&(M||L)&&(t=ye(),o=ke()),z&&(S.append(Te('<div class="jspVerticalBar"></div>').append(Te('<div class="jspCap jspCapTop"></div>'),Te('<div class="jspTrack"></div>').append(Te('<div class="jspDrag"></div>').append(Te('<div class="jspDragTop"></div>'),Te('<div class="jspDragBottom"></div>'))),Te('<div class="jspCap jspCapBottom"></div>'))),E=S.find(">.jspVerticalBar"),I=E.find(">.jspTrack"),W=I.find(">.jspDrag"),b.showArrows&&(q=Te('<a class="jspArrow jspArrowUp"></a>').on("mousedown.jsp",pe(0,-1)).on("click.jsp",be),O=Te('<a class="jspArrow jspArrowDown"></a>').on("mousedown.jsp",pe(0,1)).on("click.jsp",be),b.arrowScrollOnHover&&(q.on("mouseover.jsp",pe(0,-1,q)),O.on("mouseover.jsp",pe(0,1,O))),ce(I,b.verticalArrowPositions,q,O)),F=x,S.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){F-=Te(this).outerHeight()}),W.on("mouseenter",function(){W.addClass("jspHover")}).on("mouseleave",function(){W.removeClass("jspHover")}).on("mousedown.jsp",function(e){Te("html").on("dragstart.jsp selectstart.jsp",be),W.addClass("jspActive");var t=e.pageY-W.position().top;return Te("html").on("mousemove.jsp",function(e){fe(e.pageY-t,!1)}).on("mouseup.jsp mouseleave.jsp",ue),!1}),ae()),A&&(S.append(Te('<div class="jspHorizontalBar"></div>').append(Te('<div class="jspCap jspCapLeft"></div>'),Te('<div class="jspTrack"></div>').append(Te('<div class="jspDrag"></div>').append(Te('<div class="jspDragLeft"></div>'),Te('<div class="jspDragRight"></div>'))),Te('<div class="jspCap jspCapRight"></div>'))),G=S.find(">.jspHorizontalBar"),N=G.find(">.jspTrack"),X=N.find(">.jspDrag"),b.showArrows&&(U=Te('<a class="jspArrow jspArrowLeft"></a>').on("mousedown.jsp",pe(-1,0)).on("click.jsp",be),$=Te('<a class="jspArrow jspArrowRight"></a>').on("mousedown.jsp",pe(1,0)).on("click.jsp",be),b.arrowScrollOnHover&&(U.on("mouseover.jsp",pe(-1,0,U)),$.on("mouseover.jsp",pe(1,0,$))),ce(N,b.horizontalArrowPositions,U,$)),X.on("mouseenter",function(){X.addClass("jspHover")}).on("mouseleave",function(){X.removeClass("jspHover")}).on("mousedown.jsp",function(e){Te("html").on("dragstart.jsp selectstart.jsp",be),X.addClass("jspActive");var t=e.pageX-X.position().left;return Te("html").on("mousemove.jsp",function(e){ge(e.pageX-t,!1)}).on("mouseup.jsp mouseleave.jsp",ue),!1}),K=S.innerWidth(),le()),A&&z&&(v=N.outerHeight(),e=I.outerWidth(),F-=v,Te(G).find(">.jspCap:visible,>.jspArrow").each(function(){K+=Te(this).outerWidth()}),K-=e,x-=e,C-=v,N.parent().append(Te('<div class="jspCorner"></div>').css("width",v+"px")),ae(),le()),A&&T.width(S.outerWidth()-_+"px"),B=T.outerHeight(),P=B/x,A&&((Q=Math.ceil(1/H*K))>b.horizontalDragMaxWidth?Q=b.horizontalDragMaxWidth:Q<b.horizontalDragMinWidth&&(Q=b.horizontalDragMinWidth),X.css("width",Q+"px"),R=K-Q,je(L)),z&&((V=Math.ceil(1/P*F))>b.verticalDragMaxHeight?V=b.verticalDragMaxHeight:V<b.verticalDragMinHeight&&(V=b.verticalDragMinHeight),W.css("height",V+"px"),Y=F-V,he(M)),(b.stickToBottom||b.stickToRight)&&(me(w?D-C:t,!1),ve(m?B-x:o,!1)),T.find(":input,a").off("focus.jsp").on("focus.jsp",function(e){we(e.target,!1)}),S.off(se).on(se,function(e,t,o,s){var i=L=L||0,n=M=M||0,e=e.deltaFactor||b.mouseWheelSpeed;return te.scrollBy(o*e,-s*e,!1),i==L&&n==M}),f=!1,S.off("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").on("touchstart.jsp",function(e){e=e.originalEvent.touches[0];l=ye(),c=ke(),p=e.pageX,d=e.pageY,f=!(u=!1)}).on("touchmove.jsp",function(e){if(f){var t=e.originalEvent.touches[0],o=L,e=M;return te.scrollTo(l+p-t.pageX,c+d-t.pageY),u=u||5<Math.abs(p-t.pageX)||5<Math.abs(d-t.pageY),o==L&&e==M}}).on("touchend.jsp",function(e){f=!1}).on("click.jsp-touchclick",function(e){if(u)return u=!1}),b.enableKeyboardNavigation&&(j=[],A&&j.push(G[0]),z&&j.push(E[0]),T.on("focus.jsp",function(){k.focus()}),k.attr("tabindex",0).off("keydown.jsp keypress.jsp").on("keydown.jsp",function(e){if(e.target===this||j.length&&Te(e.target).closest(j).length){var t=L,o=M;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:h=e.keyCode,y();break;case 35:ve(B-x),h=null;break;case 36:ve(0),h=null}return!(g=e.keyCode==h&&t!=L||o!=M)}}).on("keypress.jsp",function(e){if(e.keyCode==h&&y(),e.target===this||j.length&&Te(e.target).closest(j).length)return!g}),b.hideFocus?(k.css("outline","none"),"hideFocus"in S[0]&&k.attr("hideFocus",!0)):(k.css("outline",""),"hideFocus"in S[0]&&k.attr("hideFocus",!1))),b.clickOnTrack&&(de(),z&&I.on("mousedown.jsp",function(s){if(void 0===s.originalTarget||s.originalTarget==s.currentTarget){var i,n=Te(this),e=n.offset(),r=s.pageY-e.top-M,a=!0,l=function(){var e=n.offset(),t=s.pageY-e.top-V/2,o=x*b.scrollPagePercent,e=Y*o/(B-x);if(r<0)t<M-e?te.scrollByY(-o):fe(t);else{if(!(0<r))return void c();M+e<t?te.scrollByY(o):fe(t)}i=setTimeout(l,a?b.initialDelay:b.trackClickRepeatFreq),a=!1},c=function(){i&&clearTimeout(i),i=null,Te(document).off("mouseup.jsp",c)};return l(),Te(document).on("mouseup.jsp",c),!1}}),A&&N.on("mousedown.jsp",function(s){if(void 0===s.originalTarget||s.originalTarget==s.currentTarget){var i,n=Te(this),e=n.offset(),r=s.pageX-e.left-L,a=!0,l=function(){var e=n.offset(),t=s.pageX-e.left-Q/2,o=C*b.scrollPagePercent,e=R*o/(D-C);if(r<0)t<L-e?te.scrollByX(-o):ge(t);else{if(!(0<r))return void c();L+e<t?te.scrollByX(o):ge(t)}i=setTimeout(l,a?b.initialDelay:b.trackClickRepeatFreq),a=!1},c=function(){i&&clearTimeout(i),i=null,Te(document).off("mouseup.jsp",c)};return l(),Te(document).on("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,o=escape(location.hash.substr(1));try{e=Te("#"+o+', a[name="'+o+'"]')}catch(e){return}e.length&&T.find(o)&&(0===S.scrollTop()?t=setInterval(function(){0<S.scrollTop()&&(we(e,!0),Te(document).scrollTop(S.position().top),clearInterval(t))},50):(we(e,!0),Te(document).scrollTop(S.position().top)))}}(),b.hijackInternalLinks&&(Te(document.body).data("jspHijack")||(Te(document.body).data("jspHijack",!0),Te(document.body).delegate('a[href*="#"]',"click",function(e){var t,o,s,i=this.href.substr(0,this.href.indexOf("#")),n=location.href;if(-1!==location.href.indexOf("#")&&(n=location.href.substr(0,location.href.indexOf("#"))),i===n){t=escape(this.href.substr(this.href.indexOf("#")+1));try{o=Te("#"+t+', a[name="'+t+'"]')}catch(e){return}o.length&&((s=o.closest(".jspScrollable")).data("jsp").scrollToElement(o,!0),s[0].scrollIntoView&&(i=Te(window).scrollTop(),((n=o.offset().top)<i||n>i+Te(window).height())&&s[0].scrollIntoView()),e.preventDefault())}})))):(k.removeClass("jspScrollable"),T.css({top:"0",left:"0",width:S.width()-_}),S.off(se),T.find(":input,a").off("focus.jsp"),k.attr("tabindex","-1").removeAttr("tabindex").off("keydown.jsp keypress.jsp"),T.off(".jsp"),de()),b.resizeSensor||!b.autoReinitialise||J?b.resizeSensor||b.autoReinitialise||!J||clearInterval(J):J=setInterval(function(){ne(b)},b.autoReinitialiseDelay),b.resizeSensor&&!oe&&(re(T,ie),re(k,ie),re(k.parent(),ie),window.addEventListener("resize",ie),oe=!0),s&&k.scrollTop(0)&&ve(s,!1),i&&k.scrollLeft(0)&&me(i,!1),k.trigger("jsp-initialised",[A||z])}function re(e,t){var o,s,i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div");function c(){r.style.width=n.offsetWidth+10+"px",r.style.height=n.offsetHeight+10+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,o=e.width(),s=e.height()}i.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",n.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",a.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",r.style.cssText="position: absolute; left: 0; top: 0;",l.style.cssText="position: absolute; left: 0; top: 0; width: 200%; height: 200%;",n.addEventListener("scroll",function(){(e.width()>o||e.height()>s)&&t.apply(this,[]),c()}.bind(this)),a.addEventListener("scroll",function(){(e.width()<o||e.height()<s)&&t.apply(this,[]),c()}.bind(this)),n.appendChild(r),a.appendChild(l),i.appendChild(n),i.appendChild(a),e.append(i),"static"===window.getComputedStyle(e[0],null).getPropertyValue("position")&&(e[0].style.position="relative"),c()}function ae(){I.height(F+"px"),M=0,t=b.verticalGutter+I.outerWidth(),T.width(C-t-_);try{0===E.position().left&&T.css("margin-left",t+"px")}catch(e){}}function le(){S.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){K-=Te(this).outerWidth()}),N.width(K+"px"),L=0}function ce(e,t,o,s){var i="before",n="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?n=t:t==n&&(i=t,t=o,o=s,s=t),e[i](o)[n](s)}function pe(e,t,o){return function(){return function(e,t,o,s){o=Te(o).addClass("jspActive");var i,n,r=!0,a=function(){0!==e&&te.scrollByX(e*b.arrowButtonSpeed),0!==t&&te.scrollByY(t*b.arrowButtonSpeed),n=setTimeout(a,r?b.initialDelay:b.arrowRepeatFreq),r=!1};a(),i=s?"mouseout.jsp":"mouseup.jsp",(s=s||Te("html")).on(i,function(){o.removeClass("jspActive"),n&&clearTimeout(n),n=null,s.off(i)})}(e,t,this,o),this.blur(),!1}}function de(){N&&N.off("mousedown.jsp"),I&&I.off("mousedown.jsp")}function ue(){Te("html").off("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),W&&W.removeClass("jspActive"),X&&X.removeClass("jspActive")}function fe(e,t){var o,s,i,n;z&&(e<0?e=0:Y<e&&(e=Y),o=new Te.Event("jsp-will-scroll-y"),k.trigger(o,[e]),o.isDefaultPrevented()||(s=0===(o=e||0),i=o==Y,n=-e/Y*(B-x),void 0===t&&(t=b.animateScroll),t?te.animate(W,"top",e,he,function(){k.trigger("jsp-user-scroll-y",[-n,s,i])}):(W.css("top",e+"px"),he(e),k.trigger("jsp-user-scroll-y",[-n,s,i]))))}function he(e){void 0===e&&(e=W.position().top),S.scrollTop(0);var t=0===(M=e||0),o=M==Y,s=-e/Y*(B-x);i==t&&r==o||(i=t,r=o,k.trigger("jsp-arrow-change",[i,r,n,a])),e=o,b.showArrows&&(q[t?"addClass":"removeClass"]("jspDisabled"),O[e?"addClass":"removeClass"]("jspDisabled")),T.css("top",s+"px"),k.trigger("jsp-scroll-y",[-s,t,o]).trigger("scroll")}function ge(e,t){var o,s,i,n;A&&(e<0?e=0:R<e&&(e=R),o=new Te.Event("jsp-will-scroll-x"),k.trigger(o,[e]),o.isDefaultPrevented()||(s=0===(o=e||0),i=o==R,n=-e/R*(D-C),void 0===t&&(t=b.animateScroll),t?te.animate(X,"left",e,je,function(){k.trigger("jsp-user-scroll-x",[-n,s,i])}):(X.css("left",e+"px"),je(e),k.trigger("jsp-user-scroll-x",[-n,s,i]))))}function je(e){void 0===e&&(e=X.position().left),S.scrollTop(0);var t=0===(L=e||0),o=L==R,s=-e/R*(D-C);n==t&&a==o||(n=t,a=o,k.trigger("jsp-arrow-change",[i,r,n,a])),e=o,b.showArrows&&(U[t?"addClass":"removeClass"]("jspDisabled"),$[e?"addClass":"removeClass"]("jspDisabled")),T.css("left",s+"px"),k.trigger("jsp-scroll-x",[-s,t,o]).trigger("scroll")}function ve(e,t){fe(e/(B-x)*Y,t)}function me(e,t){ge(e/(D-C)*R,t)}function we(e,t,o){var s,i,n,r,a,l,c,p=0,d=0;try{s=Te(e)}catch(e){return}for(r=s.outerHeight(),i=s.outerWidth(),S.scrollTop(0),S.scrollLeft(0);!s.is(".jspPane");)if(p+=s.position().top,d+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;a=(n=ke())+x,p<n||t?l=p-b.horizontalGutter:a<p+r&&(l=p-x+r+b.horizontalGutter),isNaN(l)||ve(l,o),l=(r=ye())+C,d<r||t?c=d-b.horizontalGutter:l<d+i&&(c=d-C+i+b.horizontalGutter),isNaN(c)||me(c,o)}function ye(){return-T.position().left}function ke(){return-T.position().top}function be(){return!1}_="border-box"===k.css("box-sizing")?Z=0:(Z=k.css("paddingTop")+" "+k.css("paddingRight")+" "+k.css("paddingBottom")+" "+k.css("paddingLeft"),(parseInt(k.css("paddingLeft"),10)||0)+(parseInt(k.css("paddingRight"),10)||0)),Te.extend(te,{reinitialise:function(e){ne(e=Te.extend({},b,e))},scrollToElement:function(e,t,o){we(e,t,o)},scrollTo:function(e,t,o){me(e,o),ve(t,o)},scrollToX:function(e,t){me(e,t)},scrollToY:function(e,t){ve(e,t)},scrollToPercentX:function(e,t){me(e*(D-C),t)},scrollToPercentY:function(e,t){ve(e*(B-x),t)},scrollBy:function(e,t,o){te.scrollByX(e,o),te.scrollByY(t,o)},scrollByX:function(e,t){ge((ye()+Math[e<0?"floor":"ceil"](e))/(D-C)*R,t)},scrollByY:function(e,t){fe((ke()+Math[e<0?"floor":"ceil"](e))/(B-x)*Y,t)},positionDragX:function(e,t){ge(e,t)},positionDragY:function(e,t){fe(e,t)},animate:function(e,t,o,s,i){var n={};n[t]=o,e.animate(n,{duration:b.animateDuration,easing:b.animateEase,queue:!1,step:s,complete:i})},getContentPositionX:ye,getContentPositionY:ke,getContentWidth:function(){return D},getContentHeight:function(){return B},getPercentScrolledX:function(){return ye()/(D-C)},getPercentScrolledY:function(){return ke()/(B-x)},getIsScrollableH:function(){return A},getIsScrollableV:function(){return z},getContentPane:function(){return T},scrollToBottom:function(e){fe(Y,e)},hijackInternalLinks:Te.noop,destroy:function(){var e=ke(),t=ye();k.removeClass("jspScrollable").off(".jsp"),T.off(".jsp"),k.replaceWith(o.append(T.children())),o.scrollTop(e),o.scrollLeft(t),J&&clearInterval(J)}}),ne(e)}return o=Te.extend({},Te.fn.jScrollPane.defaults,o),Te.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var e=Te(this),t=e.data("jsp");t?t.reinitialise(o):(Te("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new s(e,o),e.data("jsp",t))})},Te.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8,alwaysShowVScroll:!1,alwaysShowHScroll:!1,resizeSensor:!1,resizeSensorDelay:0}});
//# sourceMappingURL=jquery.jscrollpane.js.map
