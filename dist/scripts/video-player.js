YahVideoPlayer={previewLength:0,isVideoFree:0,flagged:!1,percent:0,logId:0,videoId:"",videoContent:{},videoContentVolume:100,videoContentFullScreen:!1,eventType:"",journeySeriesDayData:jQuery("#featured-video-meta").data("conn-id"),activityNonce:null,videoEnable:!1,updateVideoActivity:function(e,a){jQuery.ajax({type:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:"video_played",asset_id:e,percent:a,log_id:YahVideoPlayer.logId,js_day_data:YahVideoPlayer.journeySeriesDayData,nonce:YahVideoPlayer.activityNonce},success:function(e){YahVideoPlayer.logId=e.data.logId,e.data.journeyUpdated&&jQuery('[data-js-day-watched="'+YahVideoPlayer.journeySeriesDayData+'"]').addClass("watched")}})},playingVideo:function(e){jQuery.ajax({type:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:"segment_video_stats",data:e.videoContent,asset_id:e.videoId,volume:YahVideoPlayer.videoContentVolume,fullscreen:YahVideoPlayer.videoContentFullScreen,event_type:YahVideoPlayer.eventType,nonce:YahVideoPlayer.activityNonce}})},initializePlayer:function(a,e,d){YahVideoPlayer.videoId=a,YahVideoPlayer.isVideoFree=parseInt(d),console.log("Initializing Video #"+a);var o,d="video-player",i=jQuery("#featured-video-cont");"undefined"!=typeof videojs&&(i.html("").append($("<div/>").attr("id",d)),brightcovePlayerLoader({refNode:"#"+d,refNodeInsert:"replace",accountId:yahVideo.playerAccountId,playerId:yahVideo.playerId,embedId:"default",videoId:e,embedOptions:{responsive:!0}}).then(function(e){o=e.ref.id_,window.videojs.getPlayer(o).on("loadedmetadata",function(){console.log("Video #"+a+" was loaded!"),jQuery(".vjs-dock-text").hide()}),window.videojs.getPlayer(o).on("analytics_request_fullscreen_enabled",function(){YahVideoPlayer.videoContentFullScreen=!0}),window.videojs.getPlayer(o).on("analytics_request_fullscreen_disabled",function(){YahVideoPlayer.videoContentFullScreen=!1}),window.videojs.getPlayer(o).on("analytics_request_volume_change",function(e){YahVideoPlayer.videoContentVolume=Math.round(100*e.params.volume)}),window.videojs.getPlayer(o).on("analytics_request",function(e){"play_request"===e.params.event&&(YahVideoPlayer.eventType="started",YahVideoPlayer.videoContent={session_id:e.params.session,content_asset_id:e.params.video,content_pod_id:null,title:e.params.video_data.name,description:e.params.video_data.description,keywords:e.params.tags,season:null,episode:null,genre:null,player_name:e.params.player,ad_enabled:e.params.ads_enabled,program:null,publisher:null,position:null,total_length:e.params.video_data.duration,channel:null,full_episode:null,livestream:!1,airdate:e.params.video_data.createdAt,bitrate:e.params.video_data.sources[2].avg_bitrate,framerate:null},YahVideoPlayer.playingVideo(YahVideoPlayer)),jQuery(".vjs-dock-text").hide()}),YahVideoPlayer.videoEnable?(window.videojs.getPlayer(o).on("timeupdate",function(){var e=this.currentTime(),a=e/this.duration()*100,d=YahVideoPlayer.videoId;5<e&&!YahVideoPlayer.flagged&&(YahVideoPlayer.flagged=!0,YahVideoPlayer.updateVideoActivity(d,a)),2<a-YahVideoPlayer.percent&&(YahVideoPlayer.flagged=!1,YahVideoPlayer.percent=a)}),window.videojs.getPlayer(o).on("ended",function(){YahVideoPlayer.eventType="completed",YahVideoPlayer.updateVideoActivity(YahVideoPlayer.videoId,100),YahVideoPlayer.playingVideo(YahVideoPlayer)})):window.videojs.getPlayer(o).on("timeupdate",function(){var e=this;e.currentTime()>YahVideoPlayer.previewLength&&0===YahVideoPlayer.isVideoFree&&(e.pause(),jQuery("#preview-end").show(),i.hide(),e.dispose())})}))}};
//# sourceMappingURL=video-player.js.map
